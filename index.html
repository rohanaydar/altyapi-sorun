<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AltyapÄ± Sorun Bildirim Sistemi</title>
    <style>
        /* TEMEL STÄ°LLER */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Arial, sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: #333;
            line-height: 1.6;
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        /* BAÅLIK VE MENÃœ */
        header {
            background: linear-gradient(135deg, #2c3e50, #4a6491);
            color: white;
            padding: 25px;
            border-radius: 10px;
            margin-bottom: 30px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        h1 {
            font-size: 28px;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        h1 i {
            font-size: 32px;
        }
        
        .tagline {
            font-size: 16px;
            opacity: 0.9;
            margin-bottom: 20px;
        }
        
        nav {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            margin-top: 20px;
        }
        
        .nav-btn {
            background: rgba(255, 255, 255, 0.15);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.3);
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 500;
        }
        
        .nav-btn:hover {
            background: rgba(255, 255, 255, 0.25);
            transform: translateY(-2px);
        }
        
        .nav-btn.active {
            background: #3498db;
            border-color: #2980b9;
        }
        
        /* SAYFA Ä°Ã‡ERÄ°KLERÄ° */
        .page {
            display: none;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.08);
            margin-bottom: 30px;
            animation: fadeIn 0.5s ease;
        }
        
        .page.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #3498db;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        h2 i {
            color: #3498db;
        }
        
        /* FORMLAR */
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #2c3e50;
        }
        
        input, select, textarea {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #ddd;
            border-radius: 6px;
            font-size: 16px;
            transition: border 0.3s;
        }
        
        input:focus, select:focus, textarea:focus {
            border-color: #3498db;
            outline: none;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }
        
        textarea {
            min-height: 120px;
            resize: vertical;
        }
        
        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        @media (max-width: 768px) {
            .form-row {
                grid-template-columns: 1fr;
            }
        }
        
        /* BUTONLAR */
        .btn {
            background: #3498db;
            color: white;
            border: none;
            padding: 14px 28px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        .btn:hover {
            background: #2980b9;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(52, 152, 219, 0.3);
        }
        
        .btn-success {
            background: #27ae60;
        }
        
        .btn-success:hover {
            background: #219653;
            box-shadow: 0 4px 12px rgba(39, 174, 96, 0.3);
        }
        
        /* BÄ°LDÄ°RÄ°M LÄ°STESÄ° */
        .bildirim-listesi {
            display: grid;
            gap: 20px;
        }
        
        .bildirim-karti {
            background: #f8f9fa;
            border-left: 4px solid #3498db;
            padding: 20px;
            border-radius: 8px;
            transition: transform 0.3s;
        }
        
        .bildirim-karti:hover {
            transform: translateX(5px);
            background: #f1f8ff;
        }
        
        .bildirim-baslik {
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 8px;
            font-size: 18px;
        }
        
        .bildirim-detay {
            display: flex;
            gap: 20px;
            margin-bottom: 10px;
            flex-wrap: wrap;
        }
        
        .etiket {
            background: #e3f2fd;
            color: #1565c0;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 500;
        }
        
        .etiket.onemli {
            background: #ffebee;
            color: #c62828;
        }
        
        .etiket.tamamlandi {
            background: #e8f5e9;
            color: #2e7d32;
        }
        
        /* Ä°STATÄ°STÄ°K KARTLARI */
        .istatistikler {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .istatistik-kart {
            background: white;
            padding: 25px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.08);
        }
        
        .istatistik-sayi {
            font-size: 36px;
            font-weight: 700;
            color: #2c3e50;
            margin-bottom: 5px;
        }
        
        .istatistik-label {
            color: #7f8c8d;
            font-size: 14px;
        }
        
        /* MESAJLAR */
        .mesaj {
            padding: 15px;
            border-radius: 6px;
            margin: 15px 0;
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .mesaj.success {
            background: #d4edda;
            color: #155724;
            border-left: 4px solid #28a745;
        }
        
        .mesaj.error {
            background: #f8d7da;
            color: #721c24;
            border-left: 4px solid #dc3545;
        }
        
        .mesaj.info {
            background: #d1ecf1;
            color: #0c5460;
            border-left: 4px solid #17a2b8;
        }
        
        /* FOOTER */
        footer {
            text-align: center;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #ddd;
            color: #7f8c8d;
            font-size: 14px;
        }
        
        /* Ä°KONLAR (Emoji fallback) */
        .icon { font-style: normal; }
        .icon-home::before { content: "ğŸ "; }
        .icon-report::before { content: "ğŸ“"; }
        .icon-list::before { content: "ğŸ“‹"; }
        .icon-stats::before { content: "ğŸ“Š"; }
        .icon-location::before { content: "ğŸ“"; }
        .icon-time::before { content: "ğŸ•’"; }
        .icon-check::before { content: "âœ…"; }
        .icon-warning::before { content: "âš ï¸"; }
        .icon-phone::before { content: "ğŸ“"; }
        .icon-email::before { content: "âœ‰ï¸"; }
    </style>
</head>
<body>
    <!-- BAÅLIK VE MENÃœ -->
    <header>
        <h1><span class="icon icon-warning"></span> AltyapÄ± Sorun Bildirim Sistemi</h1>
        <p class="tagline">DoÄŸu ve GÃ¼neydoÄŸu bÃ¶lgelerindeki anlaÅŸmalÄ± mahallelerdeki altyapÄ± sorunlarÄ±nÄ± bildirin</p>
        
        <nav>
            <button class="nav-btn active" data-page="home">
                <span class="icon icon-home"></span> Ana Sayfa
            </button>
            <button class="nav-btn" data-page="report">
                <span class="icon icon-report"></span> Bildirim Yap
            </button>
            <button class="nav-btn" data-page="list">
                <span class="icon icon-list"></span> Bildirim Listesi
            </button>
            <button class="nav-btn" data-page="stats">
                <span class="icon icon-stats"></span> Ä°statistikler
            </button>
        </nav>
    </header>

    <!-- ANA SAYFA -->
    <section id="home" class="page active">
        <h2><span class="icon icon-home"></span> HoÅŸ Geldiniz</h2>
        
        <div class="mesaj info">
            <span class="icon icon-check"></span>
            <div>
                <strong>Sistem hazÄ±r.</strong> AltyapÄ± sorunlarÄ±nÄ±zÄ± bildirebilir, mevcut bildirimleri gÃ¶rÃ¼ntÃ¼leyebilir ve istatistiklere ulaÅŸabilirsiniz.
            </div>
        </div>
        
        <div class="istatistikler" id="ana-sayfa-istatistik">
            <!-- Ä°statistikler JavaScript ile yÃ¼klenecek -->
        </div>
        
        <h3>HÄ±zlÄ± Ä°ÅŸlemler</h3>
        <div style="display: flex; gap: 15px; margin-top: 20px; flex-wrap: wrap;">
            <button class="btn" onclick="showPage('report')">
                <span class="icon icon-report"></span> Yeni Bildirim Yap
            </button>
            <button class="btn" onclick="loadBildirimler()">
                <span class="icon icon-list"></span> Bildirimleri GÃ¶ster
            </button>
        </div>
        
        <h3 style="margin-top: 30px;">Sistem HakkÄ±nda</h3>
        <p>Bu sistem, DoÄŸu ve GÃ¼neydoÄŸu Anadolu bÃ¶lgelerindeki anlaÅŸmalÄ± mahallelerde yaÅŸanan altyapÄ± sorunlarÄ±nÄ±n (su, elektrik, yol, kanalizasyon vb.) hÄ±zlÄ± bir ÅŸekilde bildirilmesi ve takip edilmesi amacÄ±yla geliÅŸtirilmiÅŸtir.</p>
    </section>

    <!-- BÄ°LDÄ°RÄ°M FORMU -->
    <section id="report" class="page">
        <h2><span class="icon icon-report"></span> Yeni Bildirim</h2>
        
        <form id="bildirimForm">
            <div class="form-row">
                <div class="form-group">
                    <label for="isim">Ad Soyad *</label>
                    <input type="text" id="isim" required placeholder="AdÄ±nÄ±z ve soyadÄ±nÄ±z">
                </div>
                
                <div class="form-group">
                    <label for="telefon">Telefon *</label>
                    <input type="tel" id="telefon" required placeholder="05XX XXX XX XX">
                </div>
            </div>
            
            <div class="form-row">
                <div class="form-group">
                    <label for="mahalle">Mahalle *</label>
                    <select id="mahalle" required>
                        <option value="">Mahalle seÃ§in</option>
                        <option value="Merkez">Merkez</option>
                        <option value="YeniÅŸehir">YeniÅŸehir</option>
                        <option value="KÄ±zÄ±lay">KÄ±zÄ±lay</option>
                        <option value="BahÃ§elievler">BahÃ§elievler</option>
                        <option value="Åehitler">Åehitler</option>
                        <option value="DiÄŸer">DiÄŸer</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="sorun-tipi">Sorun Tipi *</label>
                    <select id="sorun-tipi" required>
                        <option value="">Sorun tipi seÃ§in</option>
                        <option value="Su">Su Sorunu (kesinti, basÄ±nÃ§ dÃ¼ÅŸÃ¼klÃ¼ÄŸÃ¼)</option>
                        <option value="Elektrik">Elektrik Sorunu (kesinti, voltaj dÃ¼ÅŸÃ¼klÃ¼ÄŸÃ¼)</option>
                        <option value="Yol">Yol Sorunu (Ã§Ã¶kme, bozuk yol)</option>
                        <option value="Kanalizasyon">Kanalizasyon (tÄ±kanÄ±klÄ±k, taÅŸma)</option>
                        <option value="Internet">Ä°nternet AltyapÄ±sÄ±</option>
                        <option value="DiÄŸer">DiÄŸer</option>
                    </select>
                </div>
            </div>
            
            <div class="form-group">
                <label for="aciklama">AÃ§Ä±klama *</label>
                <textarea id="aciklama" required placeholder="Sorunu detaylÄ± bir ÅŸekilde aÃ§Ä±klayÄ±n..."></textarea>
            </div>
            
            <div class="form-group">
                <label for="adres">Adres (Opsiyonel)</label>
                <input type="text" id="adres" placeholder="Sorunun olduÄŸu tam adres">
            </div>
            
            <div class="form-group">
                <label>
                    <input type="checkbox" id="acil" style="width: auto; margin-right: 8px;">
                    Acil durum (hÄ±zlÄ± mÃ¼dahale gerekiyor)
                </label>
            </div>
            
            <div style="margin-top: 30px;">
                <button type="submit" class="btn btn-success">
                    <span class="icon icon-check"></span> Bildirimi GÃ¶nder
                </button>
                <button type="button" class="btn" onclick="showPage('home')" style="margin-left: 15px;">
                    Ä°ptal
                </button>
            </div>
        </form>
    </section>

    <!-- BÄ°LDÄ°RÄ°M LÄ°STESÄ° -->
    <section id="list" class="page">
        <h2><span class="icon icon-list"></span> Bildirim Listesi</h2>
        
        <div style="margin-bottom: 20px; display: flex; gap: 15px;">
            <button class="btn" onclick="loadBildirimler()">
                <span class="icon icon-check"></span> Listeyi Yenile
            </button>
            <button class="btn" onclick="showPage('report')">
                <span class="icon icon-report"></span> Yeni Bildirim
            </button>
        </div>
        
        <div id="bildirimler-container">
            <p>Bildirimler yÃ¼kleniyor...</p>
        </div>
    </section>

    <!-- Ä°STATÄ°STÄ°KLER -->
    <section id="stats" class="page">
        <h2><span class="icon icon-stats"></span> Ä°statistikler</h2>
        
        <div class="istatistikler" id="istatistik-container">
            <!-- Ä°statistikler buraya yÃ¼klenecek -->
        </div>
        
        <h3>DaÄŸÄ±lÄ±mlar</h3>
        <div id="grafikler" style="background: white; padding: 20px; border-radius: 8px; margin-top: 20px;">
            <p>Grafikler yÃ¼kleniyor...</p>
        </div>
    </section>

    <!-- FOOTER -->
    <footer>
        <p>AltyapÄ± Sorun Bildirim Sistemi &copy; 2025</p>
        <p>DoÄŸu ve GÃ¼neydoÄŸu Anadolu BÃ¶lgeleri AnlaÅŸmalÄ± Mahalleler</p>
        <p style="margin-top: 10px; font-size: 12px;">
            <span class="icon icon-phone"></span> Destek: 0850 XXX XX XX | 
            <span class="icon icon-email"></span> E-posta: destek@altyapisorun.gov.tr
        </p>
    </footer>

    <!-- JAVASCRIPT KODLARI -->
    <script>
        // VERÄ° DEPOLAMA (LocalStorage kullanÄ±yoruz)
        const DB_NAME = 'altyapiBildirimDB';
        
        // BaÅŸlangÄ±Ã§ verileri
        const ornekBildirimler = [
            {
                id: 1,
                isim: "Ahmet YÄ±lmaz",
                telefon: "0532 123 4567",
                mahalle: "Merkez",
                sorunTipi: "Su",
                aciklama: "Mahallemizde 3 gÃ¼ndÃ¼r su kesintisi var.",
                adres: "Merkez Mah. AtatÃ¼rk Cad. No:15",
                acil: true,
                tarih: "2025-01-10",
                durum: "bekliyor"
            },
            {
                id: 2,
                isim: "AyÅŸe Demir",
                telefon: "0543 987 6543",
                mahalle: "YeniÅŸehir",
                sorunTipi: "Elektrik",
                aciklama: "Voltaj dÃ¼ÅŸÃ¼klÃ¼ÄŸÃ¼ nedeniyle elektronik cihazlar zarar gÃ¶rÃ¼yor.",
                adres: "",
                acil: false,
                tarih: "2025-01-11",
                durum: "inceleniyor"
            }
        ];
        
        // UYGULAMA BAÅLATMA
        document.addEventListener('DOMContentLoaded', function() {
            console.log("âœ… AltyapÄ± Bildirim Sistemi baÅŸlatÄ±lÄ±yor...");
            
            // VeritabanÄ±nÄ± baÅŸlat
            veritabaniBaslat();
            
            // MenÃ¼ butonlarÄ±na tÄ±klama olayÄ±nÄ± ekle
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const pageId = this.getAttribute('data-page');
                    showPage(pageId);
                });
            });
            
            // Form gÃ¶nderme olayÄ±nÄ± ekle
            document.getElementById('bildirimForm').addEventListener('submit', bildirimGonder);
            
            // Ä°statistikleri yÃ¼kle
            yukleIstatistikler();
            
            // Bildirimleri yÃ¼kle
            loadBildirimler();
            
            console.log("âœ… Sistem hazÄ±r!");
            
            // HoÅŸ geldiniz mesajÄ±
            setTimeout(() => {
                mesajGoster("Sisteme hoÅŸ geldiniz! Bildiriminizi yapabilirsiniz.", "success");
            }, 500);
        });
        
        // SAYFA DEÄÄ°ÅTÄ°RME
        function showPage(pageId) {
            // TÃ¼m sayfalarÄ± gizle
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            // SeÃ§ilen sayfayÄ± gÃ¶ster
            document.getElementById(pageId).classList.add('active');
            
            // MenÃ¼ butonlarÄ±nÄ± gÃ¼ncelle
            document.querySelectorAll('.nav-btn').forEach(btn => {
                if (btn.getAttribute('data-page') === pageId) {
                    btn.classList.add('active');
                } else {
                    btn.classList.remove('active');
                }
            });
            
            // Sayfaya Ã¶zel iÅŸlemler
            if (pageId === 'list') {
                loadBildirimler();
            } else if (pageId === 'stats') {
                yukleIstatistikler();
            }
        }
        
        // VERÄ°TABANI Ä°ÅLEMLERÄ°
        function veritabaniBaslat() {
            if (!localStorage.getItem(DB_NAME)) {
                localStorage.setItem(DB_NAME, JSON.stringify(ornekBildirimler));
                console.log("ğŸ“ VeritabanÄ± baÅŸlatÄ±ldÄ± (Ã¶rnek verilerle)");
            } else {
                console.log("ğŸ“ VeritabanÄ± zaten mevcut");
            }
        }
        
        function tumBildirimleriGetir() {
            const data = localStorage.getItem(DB_NAME);
            return data ? JSON.parse(data) : [];
        }
        
        function bildirimEkle(yeniBildirim) {
            const bildirimler = tumBildirimleriGetir();
            
            // Yeni ID oluÅŸtur
            const yeniId = bildirimler.length > 0 
                ? Math.max(...bildirimler.map(b => b.id)) + 1 
                : 1;
            
            // Tarih ekle
            const today = new Date();
            const tarih = today.toISOString().split('T')[0];
            
            // Yeni bildirim nesnesi
            const tamBildirim = {
                ...yeniBildirim,
                id: yeniId,
                tarih: tarih,
                durum: "bekliyor"
            };
            
            // VeritabanÄ±na ekle
            bildirimler.push(tamBildirim);
            localStorage.setItem(DB_NAME, JSON.stringify(bildirimler));
            
            return tamBildirim;
        }
        
        function bildirimSil(id) {
            let bildirimler = tumBildirimleriGetir();
            const baslangicSayisi = bildirimler.length;
            
            bildirimler = bildirimler.filter(bildirim => bildirim.id !== id);
            
            if (bildirimler.length < baslangicSayisi) {
                localStorage.setItem(DB_NAME, JSON.stringify(bildirimler));
                return true;
            }
            return false;
        }
        
        // BÄ°LDÄ°RÄ°M GÃ–NDERME
        function bildirimGonder(event) {
            event.preventDefault();
            
            // Form verilerini al
            const yeniBildirim = {
                isim: document.getElementById('isim').value,
                telefon: document.getElementById('telefon').value,
                mahalle: document.getElementById('mahalle').value,
                sorunTipi: document.getElementById('sorun-tipi').value,
                aciklama: document.getElementById('aciklama').value,
                adres: document.getElementById('adres').value || '',
                acil: document.getElementById('acil').checked
            };
            
            // VeritabanÄ±na ekle
            const kaydedilenBildirim = bildirimEkle(yeniBildirim);
            
            // BaÅŸarÄ± mesajÄ±
            mesajGoster(
                `Bildiriminiz kaydedildi! (ID: ${kaydedilenBildirim.id})<br>En kÄ±sa sÃ¼rede incelenecektir.`,
                "success"
            );
            
            // Formu temizle
            document.getElementById('bildirimForm').reset();
            
            // Bildirim listesini gÃ¼ncelle
            loadBildirimler();
            
            // Ä°statistikleri gÃ¼ncelle
            yukleIstatistikler();
            
            // Ana sayfaya dÃ¶n
            setTimeout(() => showPage('home'), 2000);
        }
        
        // BÄ°LDÄ°RÄ°MLERÄ° LÄ°STELEME
        function loadBildirimler() {
            const container = document.getElementById('bildirimler-container');
            const bildirimler = tumBildirimleriGetir();
            
            if (bildirimler.length === 0) {
                container.innerHTML = `
                    <div class="mesaj info">
                        <span class="icon icon-warning"></span>
                        <div>HenÃ¼z bildirim bulunmuyor. Ä°lk bildirimi siz yapÄ±n!</div>
                    </div>
                `;
                return;
            }
            
            let html = `<div class="bildirim-listesi">`;
            
            // Bildirimleri tarihe gÃ¶re ters sÄ±rala (yeniden eskiye)
            bildirimler.sort((a, b) => new Date(b.tarih) - new Date(a.tarih));
            
            bildirimler.forEach(bildirim => {
                // Duruma gÃ¶re etiket
                let durumEtiketi = '';
                if (bildirim.durum === 'tamamlandi') {
                    durumEtiketi = '<span class="etiket tamamlandi">TamamlandÄ±</span>';
                } else if (bildirim.durum === 'inceleniyor') {
                    durumEtiketi = '<span class="etiket">Ä°nceleniyor</span>';
                } else {
                    durumEtiketi = '<span class="etiket">Bekliyor</span>';
                }
                
                // Acil durum etiketi
                const acilEtiketi = bildirim.acil 
                    ? '<span class="etiket onemli">ACÄ°L</span>' 
                    : '';
                
                html += `
                    <div class="bildirim-karti">
                        <div class="bildirim-baslik">
                            #${bildirim.id} - ${bildirim.sorunTipi} Sorunu
                            ${acilEtiketi}
                        </div>
                        <div class="bildirim-detay">
                            <span class="icon icon-location"></span> ${bildirim.mahalle}
                            <span class="icon icon-time"></span> ${bildirim.tarih}
                            ${durumEtiketi}
                        </div>
                        <p><strong>Bildiren:</strong> ${bildirim.isim} (${bildirim.telefon})</p>
                        <p>${bildirim.aciklama}</p>
                        ${bildirim.adres ? `<p><strong>Adres:</strong> ${bildirim.adres}</p>` : ''}
                        <div style="margin-top: 15px;">
                            <button class="btn" onclick="bildirimDetay(${bildirim.id})" style="padding: 8px 15px; font-size: 14px;">
                                Detay
                            </button>
                            <button class="btn" onclick="bildirimTamamla(${bildirim.id})" style="padding: 8px 15px; font-size: 14px; margin-left: 10px;">
                                TamamlandÄ±
                            </button>
                            <button class="btn" onclick="bildirimSilUI(${bildirim.id})" style="padding: 8px 15px; font-size: 14px; margin-left: 10px; background: #e74c3c;">
                                Sil
                            </button>
                        </div>
                    </div>
                `;
            });
            
            html += `</div>`;
            container.innerHTML = html;
        }
        
        // BÄ°LDÄ°RÄ°M Ä°ÅLEMLERÄ°
        function bildirimDetay(id) {
            const bildirimler = tumBildirimleriGetir();
            const bildirim = bildirimler.find(b => b.id === id);
            
            if (bildirim) {
                alert(
                    `BÄ°LDÄ°RÄ°M DETAYI\n` +
                    `ID: ${bildirim.id}\n` +
                    `Bildiren: ${bildirim.isim}\n` +
                    `Telefon: ${bildirim.telefon}\n` +
                    `Mahalle: ${bildirim.mahalle}\n` +
                    `Sorun Tipi: ${bildirim.sorunTipi}\n` +
                    `AÃ§Ä±klama: ${bildirim.aciklama}\n` +
                    `Tarih: ${bildirim.tarih}\n` +
                    `Durum: ${bildirim.durum}\n` +
                    `Acil: ${bildirim.acil ? 'Evet' : 'HayÄ±r'}`
                );
            }
        }
        
        function bildirimTamamla(id) {
            let bildirimler = tumBildirimleriGetir();
            const index = bildirimler.findIndex(b => b.id === id);
            
            if (index !== -1) {
                bildirimler[index].durum = 'tamamlandi';
                localStorage.setItem(DB_NAME, JSON.stringify(bildirimler));
                
                mesajGoster(`#${id} numaralÄ± bildirim tamamlandÄ± olarak iÅŸaretlendi.`, "success");
                loadBildirimler();
                yukleIstatistikler();
            }
        }
        
        function bildirimSilUI(id) {
            if (confirm(`#${id} numaralÄ± bildirimi silmek istediÄŸinize emin misiniz?`)) {
                if (bildirimSil(id)) {
                    mesajGoster(`#${id} numaralÄ± bildirim silindi.`, "success");
                    loadBildirimler();
                    yukleIstatistikler();
                }
            }
        }
        
        // Ä°STATÄ°STÄ°KLER
        function yukleIstatistikler() {
            const bildirimler = tumBildirimleriGetir();
            const toplam = bildirimler.length;
            const acil = bildirimler.filter(b => b.acil).length;
            const tamamlanan = bildirimler.filter(b => b.durum === 'tamamlandi').length;
            const incelenen = bildirimler.filter(b => b.durum === 'inceleniyor').length;
            
            // Ana sayfa istatistikleri
            const anaSayfaStats = document.getElementById('ana-sayfa-istatistik');
            if (anaSayfaStats) {
                anaSayfaStats.innerHTML = `
                    <div class="istatistik-kart">
                        <div class="istatistik-sayi">${toplam}</div>
                        <div class="istatistik-label">Toplam Bildirim</div>
                    </div>
                    <div class="istatistik-kart">
                        <div class="istatistik-sayi">${acil}</div>
                        <div class="istatistik-label">Acil Bildirim</div>
                    </div>
                    <div class="istatistik-kart">
                        <div class="istatistik-sayi">${tamamlanan}</div>
                        <div class="istatistik-label">Tamamlanan</div>
                    </div>
                `;
            }
            
            // Ä°statistikler sayfasÄ±
            const statsContainer = document.getElementById('istatistik-container');
            if (statsContainer) {
                // Mahallelere gÃ¶re daÄŸÄ±lÄ±m
                const mahalleler = {};
                bildirimler.forEach(b => {
                    mahalleler[b.mahalle] = (mahalleler[b.mahalle] || 0) + 1;
                });
                
                // Sorun tiplerine gÃ¶re daÄŸÄ±lÄ±m
                const sorunTipleri = {};
                bildirimler.forEach(b => {
                    sorunTipleri[b.sorunTipi] = (sorunTipleri[b.sorunTipi] || 0) + 1;
                });
                
                let mahalleListesi = '';
                for (const [mahalle, sayi] of Object.entries(mahalleler)) {
                    mahalleListesi += `<div>${mahalle}: <strong>${sayi}</strong></div>`;
                }
                
                let sorunListesi = '';
                for (const [sorun, sayi] of Object.entries(sorunTipleri)) {
                    sorunListesi += `<div>${sorun}: <strong>${sayi}</strong></div>`;
                }
                
                statsContainer.innerHTML = `
                    <div class="istatistik-kart">
                        <div class="istatistik-sayi">${toplam}</div>
                        <div class="istatistik-label">Toplam Bildirim</div>
                    </div>
                    <div class="istatistik-kart">
                        <div class="istatistik-sayi">${acil}</div>
                        <div class="istatistik-label">Acil Bildirim</div>
                    </div>
                    <div class="istatistik-kart">
                        <div class="istatistik-sayi">${tamamlanan}</div>
                        <div class="istatistik-label">Tamamlanan</div>
                    </div>
                    <div class="istatistik-kart">
                        <div class="istatistik-sayi">${incelenen}</div>
                        <div class="istatistik-label">Ä°ncelenen</div>
                    </div>
                `;
                
                // Grafikler bÃ¶lÃ¼mÃ¼
                document.getElementById('grafikler').innerHTML = `
                    <h4>Mahallelere GÃ¶re DaÄŸÄ±lÄ±m</h4>
                    <div style="margin-bottom: 30px;">${mahalleListesi}</div>
                    <h4>Sorun Tiplerine GÃ¶re DaÄŸÄ±lÄ±m</h4>
                    <div>${sorunListesi}</div>
                `;
            }
        }
        
        // MESAJ GÃ–STERME
        function mesajGoster(mesaj, tip = 'info') {
            // Varolan mesajlarÄ± temizle
            document.querySelectorAll('.mesaj').forEach(m => {
                if (m.id === 'gecici-mesaj') m.remove();
            });
            
            const mesajDiv = document.createElement('div');
            mesajDiv.id = 'gecici-mesaj';
            mesajDiv.className = `mesaj ${tip}`;
            mesajDiv.innerHTML = `
                <span class="icon icon-check"></span>
                <div>${mesaj}</div>
            `;
            
            // Ana sayfaya veya en Ã¼ste ekle
            const homePage = document.getElementById('home');
            if (homePage) {
                homePage.prepend(mesajDiv);
            } else {
                document.body.prepend(mesajDiv);
            }
            
            // 5 saniye sonra kaldÄ±r
            setTimeout(() => {
                if (mesajDiv.parentNode) {
                    mesajDiv.remove();
                }
            }, 5000);
        }
    </script>
</body>
</html>
