<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AnlaÅŸmalÄ± Mahalleler AltyapÄ± Sorun Bildirim Sistemi</title>
    <style>
        /* TEMEL STÄ°LLER */
        :root {
            --primary: #2c3e50;
            --secondary: #3498db;
            --success: #27ae60;
            --warning: #f39c12;
            --danger: #e74c3c;
            --light: #f8f9fa;
            --dark: #343a40;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            color: #333;
            line-height: 1.6;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        /* BAÅLIK */
        header {
            background: linear-gradient(135deg, var(--primary) 0%, #4a6491 100%);
            color: white;
            padding: 25px 40px;
            text-align: center;
        }
        
        h1 {
            font-size: 32px;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }
        
        .tagline {
            font-size: 18px;
            opacity: 0.9;
            margin-bottom: 15px;
        }
        
        /* NAVÄ°GASYON */
        .main-nav {
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
            margin-top: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid rgba(255,255,255,0.2);
        }
        
        .nav-btn {
            background: rgba(255,255,255,0.15);
            color: white;
            border: 2px solid rgba(255,255,255,0.3);
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            font-size: 16px;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .nav-btn:hover, .nav-btn.active {
            background: var(--secondary);
            border-color: var(--secondary);
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.4);
        }
        
        /* ANA Ä°Ã‡ERÄ°K */
        main {
            padding: 30px 40px;
            min-height: 600px;
        }
        
        .page {
            display: none;
            animation: fadeIn 0.5s ease;
        }
        
        .page.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* ANA SAYFA */
        .hero {
            text-align: center;
            padding: 40px 20px;
        }
        
        .hero h2 {
            color: var(--primary);
            margin-bottom: 20px;
            font-size: 28px;
        }
        
        .hero-buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 30px;
            flex-wrap: wrap;
        }
        
        /* BUTONLAR */
        .btn {
            padding: 14px 28px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .btn-primary {
            background: var(--secondary);
            color: white;
        }
        
        .btn-primary:hover {
            background: #2980b9;
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.4);
        }
        
        .btn-success {
            background: var(--success);
            color: white;
        }
        
        .btn-success:hover {
            background: #219653;
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(39, 174, 96, 0.4);
        }
        
        .btn-warning {
            background: var(--warning);
            color: white;
        }
        
        .btn-danger {
            background: var(--danger);
            color: white;
        }
        
        /* KARTLAR */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 25px;
            margin: 30px 0;
        }
        
        .stat-card {
            background: white;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.08);
            text-align: center;
            transition: transform 0.3s;
            border-top: 5px solid var(--secondary);
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
        }
        
        .stat-card h3 {
            color: var(--primary);
            margin-bottom: 10px;
            font-size: 18px;
        }
        
        .stat-value {
            font-size: 36px;
            font-weight: 700;
            color: var(--secondary);
            margin: 10px 0;
        }
        
        .stat-desc {
            color: #666;
            font-size: 14px;
        }
        
        /* MODAL (AÃ§Ä±lÄ±r Pencere) */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.7);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            padding: 20px;
        }
        
        .modal-overlay.active {
            display: flex;
        }
        
        .modal {
            background: white;
            border-radius: 15px;
            width: 100%;
            max-width: 700px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            animation: modalSlide 0.4s ease;
        }
        
        @keyframes modalSlide {
            from { opacity: 0; transform: translateY(-50px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .modal-header {
            background: linear-gradient(135deg, var(--primary) 0%, #4a6491 100%);
            color: white;
            padding: 20px 30px;
            border-radius: 15px 15px 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .modal-header h3 {
            font-size: 22px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .modal-close {
            background: none;
            border: none;
            color: white;
            font-size: 28px;
            cursor: pointer;
            padding: 0;
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: background 0.3s;
        }
        
        .modal-close:hover {
            background: rgba(255,255,255,0.2);
        }
        
        .modal-body {
            padding: 30px;
        }
        
        /* ADIMLI FORMU */
        .step-indicator {
            display: flex;
            justify-content: space-between;
            margin-bottom: 30px;
            position: relative;
        }
        
        .step-indicator::before {
            content: '';
            position: absolute;
            top: 20px;
            left: 0;
            right: 0;
            height: 3px;
            background: #e0e0e0;
            z-index: 1;
        }
        
        .step {
            position: relative;
            z-index: 2;
            text-align: center;
            flex: 1;
        }
        
        .step-circle {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #e0e0e0;
            color: #666;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 10px;
            font-weight: bold;
            font-size: 18px;
            transition: all 0.3s;
        }
        
        .step.active .step-circle {
            background: var(--secondary);
            color: white;
            box-shadow: 0 0 0 5px rgba(52, 152, 219, 0.2);
        }
        
        .step.completed .step-circle {
            background: var(--success);
            color: white;
        }
        
        .step-label {
            font-size: 14px;
            color: #666;
        }
        
        .step.active .step-label {
            color: var(--secondary);
            font-weight: 600;
        }
        
        .step-content {
            display: none;
        }
        
        .step-content.active {
            display: block;
        }
        
        /* FORM ELEMANLARI */
        .form-group {
            margin-bottom: 25px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--primary);
            font-size: 16px;
        }
        
        .form-control {
            width: 100%;
            padding: 14px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            transition: border 0.3s;
        }
        
        .form-control:focus {
            border-color: var(--secondary);
            outline: none;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
        }
        
        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        @media (max-width: 768px) {
            .form-row {
                grid-template-columns: 1fr;
            }
        }
        
        /* SORUN EMOJÄ°LERÄ° */
        .emoji-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        
        .emoji-option {
            border: 2px solid #ddd;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            background: white;
        }
        
        .emoji-option:hover {
            border-color: var(--secondary);
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .emoji-option.selected {
            border-color: var(--success);
            background: rgba(39, 174, 96, 0.05);
            box-shadow: 0 0 0 3px rgba(39, 174, 96, 0.2);
        }
        
        .emoji {
            font-size: 40px;
            margin-bottom: 10px;
            display: block;
        }
        
        /* ACÄ°LÄ°YET */
        .aciliyet-options {
            display: flex;
            gap: 15px;
            margin-top: 15px;
        }
        
        .aciliyet-btn {
            flex: 1;
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 8px;
            background: white;
            cursor: pointer;
            text-align: center;
            font-weight: 600;
            transition: all 0.3s;
        }
        
        .aciliyet-btn:hover {
            border-color: var(--warning);
        }
        
        .aciliyet-btn.selected {
            border-color: var(--warning);
            background: rgba(243, 156, 18, 0.1);
        }
        
        .aciliyet-btn.acil {
            color: var(--danger);
        }
        
        .aciliyet-btn.orta {
            color: var(--warning);
        }
        
        .aciliyet-btn.dusuk {
            color: var(--success);
        }
        
        /* MODAL FOOTER (Ä°leri/Geri) */
        .modal-footer {
            padding: 20px 30px;
            border-top: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            background: #f8f9fa;
            border-radius: 0 0 15px 15px;
        }
        
        /* BÄ°LDÄ°RÄ°M LÄ°STESÄ° */
        .filter-section {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 12px;
            margin-bottom: 30px;
        }
        
        .filter-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .list-actions {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            flex-wrap: wrap;
            gap: 15px;
        }
        
        /* BÄ°LDÄ°RÄ°M KARTLARI */
        .bildirim-list {
            display: grid;
            gap: 20px;
        }
        
        .bildirim-card {
            background: white;
            border-left: 5px solid var(--secondary);
            border-radius: 10px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            transition: transform 0.3s;
        }
        
        .bildirim-card:hover {
            transform: translateX(5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.1);
        }
        
        .bildirim-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 15px;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .bildirim-id {
            font-weight: 700;
            color: var(--primary);
            background: #f1f8ff;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 14px;
        }
        
        .bildirim-durum {
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
        }
        
        .durum-bekliyor {
            background: #fff3cd;
            color: #856404;
        }
        
        .durum-inceleniyor {
            background: #cce5ff;
            color: #004085;
        }
        
        .durum-tamamlandi {
            background: #d4edda;
            color: #155724;
        }
        
        .bildirim-body {
            margin-bottom: 20px;
        }
        
        .bildirim-detay {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 15px;
        }
        
        .detay-item {
            display: flex;
            flex-direction: column;
        }
        
        .detay-label {
            font-size: 12px;
            color: #666;
            margin-bottom: 5px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .detay-value {
            font-weight: 600;
            color: var(--primary);
            font-size: 16px;
        }
        
        .aciliyet-badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 13px;
            font-weight: 600;
        }
        
        .aciliyet-acil {
            background: #f8d7da;
            color: #721c24;
        }
        
        .aciliyet-orta {
            background: #fff3cd;
            color: #856404;
        }
        
        .aciliyet-dusuk {
            background: #d4edda;
            color: #155724;
        }
        
        /* ADMIN PANEL */
        .admin-login {
            max-width: 400px;
            margin: 50px auto;
            background: white;
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        
        .admin-actions {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            margin-top: 30px;
        }
        
        .admin-bildirim-card {
            position: relative;
        }
        
        .admin-buttons {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        .admin-bildirim-card:hover .admin-buttons {
            opacity: 1;
        }
        
        /* FOOTER */
        footer {
            text-align: center;
            padding: 30px;
            margin-top: 50px;
            border-top: 1px solid #eee;
            color: #666;
            font-size: 14px;
        }
        
        /* RESPONSIVE */
        @media (max-width: 768px) {
            header {
                padding: 20px;
            }
            
            h1 {
                font-size: 24px;
                flex-direction: column;
                gap: 10px;
            }
            
            .main-nav {
                flex-direction: column;
                align-items: center;
            }
            
            .nav-btn {
                width: 100%;
                max-width: 300px;
            }
            
            main {
                padding: 20px;
            }
            
            .form-row {
                grid-template-columns: 1fr;
            }
            
            .list-actions {
                flex-direction: column;
                align-items: stretch;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- BAÅLIK VE MENÃœ -->
        <header>
            <h1>ğŸš§ AnlaÅŸmalÄ± Mahalleler AltyapÄ± Sorun Bildirim Sistemi</h1>
            <p class="tagline">23 ildeki anlaÅŸmalÄ± mahallelerdeki altyapÄ± sorunlarÄ±nÄ± bildirin</p>
            
            <div class="main-nav">
                <button class="nav-btn active" data-page="home">
                    <span>ğŸ </span> Ana Sayfa
                </button>
                <button class="nav-btn" data-page="list">
                    <span>ğŸ“‹</span> Bildirim Listesi
                </button>
                <button class="nav-btn" data-page="stats">
                    <span>ğŸ“Š</span> Ä°statistikler
                </button>
                <button class="nav-btn" id="adminBtn">
                    <span>ğŸ”</span> Admin GiriÅŸ
                </button>
                <button class="btn btn-primary" id="yeniBildirimBtn">
                    <span>+</span> Yeni Bildirim Yap
                </button>
            </div>
        </header>

        <!-- ANA Ä°Ã‡ERÄ°K ALANI -->
        <main>
            <!-- ANA SAYFA -->
            <section id="home" class="page active">
                <div class="hero">
                    <h2>AltyapÄ± SorunlarÄ±nÄ±zÄ± Bildirin, Ã‡Ã¶zÃ¼me KatkÄ± SaÄŸlayÄ±n</h2>
                    <p>23 ilde, anlaÅŸmalÄ± mahallelerdeki altyapÄ± sorunlarÄ±nÄ± (su, elektrik, yol, kanalizasyon vb.) hÄ±zlÄ± bir ÅŸekilde bildirin. Sistemimiz tamamen Ã¼cretsizdir.</p>
                    
                    <div class="hero-buttons">
                        <button class="btn btn-primary" id="heroBildirimBtn">
                            <span>ğŸ“</span> Hemen Bildirim Yap
                        </button>
                        <button class="btn btn-success" onclick="showPage('list')">
                            <span>ğŸ‘ï¸</span> Bildirimleri GÃ¶rÃ¼ntÃ¼le
                        </button>
                    </div>
                </div>
                
                <div class="stats-grid" id="homeStats">
                    <!-- Ana sayfa istatistikleri buraya yÃ¼klenecek -->
                </div>
                
                <div style="text-align: center; margin-top: 40px;">
                    <h3 style="color: var(--primary); margin-bottom: 20px;">NasÄ±l Ã‡alÄ±ÅŸÄ±r?</h3>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;">
                        <div class="stat-card">
                            <div style="font-size: 40px; margin-bottom: 15px;">1ï¸âƒ£</div>
                            <h3>Bildirim Yap</h3>
                            <p>4 adÄ±mda kolayca sorununuzu bildirin</p>
                        </div>
                        <div class="stat-card">
                            <div style="font-size: 40px; margin-bottom: 15px;">2ï¸âƒ£</div>
                            <h3>Takip Edin</h3>
                            <p>Bildiriminizin durumunu liste sayfasÄ±ndan takip edin</p>
                        </div>
                        <div class="stat-card">
                            <div style="font-size: 40px; margin-bottom: 15px;">3ï¸âƒ£</div>
                            <h3>Ã‡Ã¶zÃ¼me KavuÅŸun</h3>
                            <p>Ä°lgili birimler bildiriminizi en kÄ±sa sÃ¼rede Ã§Ã¶zsÃ¼n</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- BÄ°LDÄ°RÄ°M LÄ°STESÄ° -->
            <section id="list" class="page">
                <h2 style="color: var(--primary); margin-bottom: 25px;">ğŸ“‹ TÃ¼m Bildirimler</h2>
                
                <div class="filter-section">
                    <h3 style="margin-bottom: 20px; color: var(--primary);">ğŸ” Filtrele</h3>
                    <div class="filter-row">
                        <div class="form-group">
                            <label for="filterSehir">Åehir</label>
                            <select id="filterSehir" class="form-control">
                                <option value="">TÃ¼m Åehirler</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="filterIlce">Ä°lÃ§e</label>
                            <select id="filterIlce" class="form-control" disabled>
                                <option value="">TÃ¼m Ä°lÃ§eler</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="filterMahalle">Mahalle</label>
                            <select id="filterMahalle" class="form-control" disabled>
                                <option value="">TÃ¼m Mahalleler</option>
                            </select>
                        </div>
                    </div>
                    <div class="filter-row">
                        <div class="form-group">
                            <label for="filterSorun">Sorun Tipi</label>
                            <select id="filterSorun" class="form-control">
                                <option value="">TÃ¼m Sorun Tipleri</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="filterAciliyet">Aciliyet</label>
                            <select id="filterAciliyet" class="form-control">
                                <option value="">TÃ¼m Aciliyetler</option>
                                <option value="acil">Acil</option>
                                <option value="orta">Orta</option>
                                <option value="dusuk">DÃ¼ÅŸÃ¼k</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="filterDurum">Durum</label>
                            <select id="filterDurum" class="form-control">
                                <option value="">TÃ¼m Durumlar</option>
                                <option value="bekliyor">Bekliyor</option>
                                <option value="inceleniyor">Ä°nceleniyor</option>
                                <option value="tamamlandi">TamamlandÄ±</option>
                            </select>
                        </div>
                    </div>
                    <button class="btn btn-primary" onclick="applyFilters()">
                        <span>ğŸ”</span> Filtrele
                    </button>
                    <button class="btn" onclick="resetFilters()" style="margin-left: 10px;">
                        <span>ğŸ”„</span> Filtreyi Temizle
                    </button>
                </div>
                
                <div class="list-actions">
                    <div>
                        <strong id="bildirimSayisi">0 bildirim bulundu</strong>
                    </div>
                    <button class="btn btn-success" onclick="exportToExcel()">
                        <span>ğŸ“¥</span> Excel Olarak Ä°ndir
                    </button>
                </div>
                
                <div class="bildirim-list" id="bildirimListesi">
                    <!-- Bildirimler buraya yÃ¼klenecek -->
                    <p style="text-align: center; padding: 40px; color: #666;">HenÃ¼z bildirim bulunmuyor.</p>
                </div>
            </section>

            <!-- Ä°STATÄ°STÄ°KLER -->
            <section id="stats" class="page">
                <h2 style="color: var(--primary); margin-bottom: 25px;">ğŸ“Š DetaylÄ± Ä°statistikler</h2>
                
                <div class="stats-grid" id="detayliStats">
                    <!-- DetaylÄ± istatistikler buraya yÃ¼klenecek -->
                </div>
                
                <div style="margin-top: 40px;">
                    <h3 style="color: var(--primary); margin-bottom: 20px;">ğŸ† En Ä°yi ve En Ã‡ok Sorunlu Mahalleler</h3>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 25px;">
                        <div class="stat-card">
                            <h3>ğŸ† En HÄ±zlÄ± Ã‡Ã¶zÃ¼m Yapan Mahalle</h3>
                            <div class="stat-value" id="enHizliMahalle">-</div>
                            <p class="stat-desc" id="enHizliDetay">Ortalama Ã§Ã¶zÃ¼m sÃ¼resi: - gÃ¼n</p>
                        </div>
                        <div class="stat-card">
                            <h3>âš ï¸ En Ã‡ok Sorun Olan Mahalle</h3>
                            <div class="stat-value" id="enCokSorunMahalle">-</div>
                            <p class="stat-desc" id="enCokSorunDetay">Toplam bildirim sayÄ±sÄ±: 0</p>
                        </div>
                        <div class="stat-card">
                            <h3>âœ… En Az Sorun Olan Mahalle</h3>
                            <div class="stat-value" id="enAzSorunMahalle">-</div>
                            <p class="stat-desc" id="enAzSorunDetay">Toplam bildirim sayÄ±sÄ±: 0</p>
                        </div>
                    </div>
                </div>
                
                <div style="margin-top: 40px;">
                    <h3 style="color: var(--primary); margin-bottom: 20px;">ğŸ“ˆ Åehirlere GÃ¶re DaÄŸÄ±lÄ±m</h3>
                    <div id="sehirDagilim" style="background: white; padding: 25px; border-radius: 12px; box-shadow: 0 5px 15px rgba(0,0,0,0.05);">
                        <!-- Åehir daÄŸÄ±lÄ±mÄ± buraya yÃ¼klenecek -->
                        <p>Veriler yÃ¼kleniyor...</p>
                    </div>
                </div>
            </section>

            <!-- ADMIN PANELÄ° (Gizli) -->
            <section id="admin" class="page">
                <div class="admin-login" id="adminLoginForm">
                    <h2 style="color: var(--primary); margin-bottom: 20px; text-align: center;">ğŸ” Admin GiriÅŸi</h2>
                    <div class="form-group">
                        <label for="adminPassword">Åifre</label>
                        <input type="password" id="adminPassword" class="form-control" placeholder="Admin ÅŸifresini girin">
                    </div>
                    <div class="form-group">
                        <label for="adminKey">Anahtar Kelime</label>
                        <input type="text" id="adminKey" class="form-control" placeholder="Anahtar kelimeyi girin">
                    </div>
                    <button class="btn btn-primary" style="width: 100%; margin-top: 20px;" onclick="adminLogin()">
                        <span>ğŸ”“</span> GiriÅŸ Yap
                    </button>
                </div>
                
                <div id="adminPanel" style="display: none;">
                    <h2 style="color: var(--primary); margin-bottom: 25px;">ğŸ› ï¸ Admin Paneli</h2>
                    
                    <div class="admin-actions">
                        <button class="btn btn-warning" onclick="markAllAsCompleted()">
                            <span>âœ…</span> TÃ¼mÃ¼nÃ¼ TamamlandÄ± Yap
                        </button>
                        <button class="btn btn-danger" onclick="deleteAllBildirimler()">
                            <span>ğŸ—‘ï¸</span> TÃ¼mÃ¼nÃ¼ Sil
                        </button>
                        <button class="btn" onclick="adminLogout()">
                            <span>ğŸšª</span> Ã‡Ä±kÄ±ÅŸ Yap
                        </button>
                    </div>
                    
                    <div style="margin-top: 40px;">
                        <h3 style="color: var(--primary); margin-bottom: 20px;">TÃ¼m Bildirimler (Admin GÃ¶rÃ¼nÃ¼mÃ¼)</h3>
                        <div id="adminBildirimListesi">
                            <!-- Admin bildirim listesi buraya yÃ¼klenecek -->
                        </div>
                    </div>
                </div>
            </section>
        </main>

        <!-- FOOTER -->
        <footer>
            <p>Ã–mer Seyfettin AYDAR Â© 2026 AnlaÅŸmalÄ± Mahalleler AltyapÄ± Sorun Bildirim Sistemi</p>
            <p style="margin-top: 10px; font-size: 13px;">23 Ä°l â€¢ 154 Ä°lÃ§e â€¢ 1200+ Mahalle â€¢ <a href:site-hukuku.html> Site Hukuku </a></p>
            <p style="margin-top: 10px; font-size: 12px; color: #999;">
                ğŸ“ Destek HattÄ±: 0(535) 870 91 89 | ğŸ“§ E-posta: rohanaydar@gmail.com
            </p>
        </footer>
    </div>

    <!-- 4 ADIMLI BÄ°LDÄ°RÄ°M MODALI -->
    <div class="modal-overlay" id="bildirimModal">
        <div class="modal">
            <div class="modal-header">
                <h3><span>ğŸ“</span> Yeni Bildirim Yap (4 AdÄ±m)</h3>
                <button class="modal-close" onclick="closeModal()">Ã—</button>
            </div>
            
            <div class="modal-body">
                <!-- ADIM GÃ–STERGESÄ° -->
                <div class="step-indicator">
                    <div class="step active" data-step="1">
                        <div class="step-circle">1</div>
                        <div class="step-label">Åehir & Ä°lÃ§e</div>
                    </div>
                    <div class="step" data-step="2">
                        <div class="step-circle">2</div>
                        <div class="step-label">Mahalle & Cadde</div>
                    </div>
                    <div class="step" data-step="3">
                        <div class="step-circle">3</div>
                        <div class="step-label">Sorun & Aciliyet</div>
                    </div>
                    <div class="step" data-step="4">
                        <div class="step-circle">4</div>
                        <div class="step-label">AÃ§Ä±klama & Ä°letiÅŸim</div>
                    </div>
                </div>
                
                <!-- ADIM 1: ÅEHÄ°R & Ä°LÃ‡E -->
                <div class="step-content active" data-step="1">
                    <div class="form-group">
                        <label for="sehir">Åehir SeÃ§in *</label>
                        <select id="sehir" class="form-control" required>
                            <option value="">LÃ¼tfen bir ÅŸehir seÃ§in</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="ilce">Ä°lÃ§e SeÃ§in *</label>
                        <select id="ilce" class="form-control" required disabled>
                            <option value="">Ã–nce ÅŸehir seÃ§in</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <p style="color: #666; font-size: 14px; margin-top: 10px;">
                            ğŸ“Œ 23 il ve 154 ilÃ§e arasÄ±ndan seÃ§im yapabilirsiniz.
                        </p>
                    </div>
                </div>
                
                <!-- ADIM 2: MAHALLE & SOKAK (SOKAK SEÃ‡Ä°MÄ° EKLENDÄ°) -->
                <div class="step-content" data-step="2">
                    <div class="form-group">
                        <label for="mahalle">Mahalle SeÃ§in *</label>
                        <select id="mahalle" class="form-control" required disabled>
                            <option value="">Ã–nce ilÃ§e seÃ§in</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="sokak">Cadde/Sokak SeÃ§in (Opsiyonel)</label>
                        <select id="sokak" class="form-control" disabled>
                            <option value="">Ã–nce mahalle seÃ§in</option>
                            <option value="diger">DiÄŸer (manuel girin)</option>
                        </select>
                        <input type="text" id="manuelSokak" class="form-control" 
                               placeholder="Manuel cadde/sokak girin" 
                               style="margin-top: 10px; display: none;">
                    </div>
                    
                    <div class="form-group">
                        <p style="color: #666; font-size: 14px; margin-top: 10px;">
                            ğŸ“Œ 1200'den fazla mahalle arasÄ±ndan seÃ§im yapabilirsiniz.
                        </p>
                    </div>
                </div>
                
                <!-- ADIM 3: SORUN & ACÄ°LÄ°YET -->
                <div class="step-content" data-step="3">
                    <div class="form-group">
                        <label>Sorun Tipi SeÃ§in *</label>
                        <div class="emoji-grid" id="sorunEmojileri">
                            <!-- Emojiler JavaScript ile eklenecek -->
                        </div>
                        <input type="hidden" id="sorunTipi" required>
                    </div>
                    
                    <div class="form-group">
                        <label>Aciliyet Durumu *</label>
                        <div class="aciliyet-options">
                            <button type="button" class="aciliyet-btn acil" data-aciliyet="acil">
                                ğŸ”´ Acil<br><small>Hemen mÃ¼dahale gerekli</small>
                            </button>
                            <button type="button" class="aciliyet-btn orta" data-aciliyet="orta">
                                ğŸŸ¡ Orta<br><small>1-3 gÃ¼n iÃ§inde</small>
                            </button>
                            <button type="button" class="aciliyet-btn dusuk" data-aciliyet="dusuk">
                                ğŸŸ¢ DÃ¼ÅŸÃ¼k<br><small>PlanlÄ± Ã§Ã¶zÃ¼m</small>
                            </button>
                        </div>
                        <input type="hidden" id="aciliyet" required>
                    </div>
                </div>
                
                <!-- ADIM 4: AÃ‡IKLAMA & Ä°LETÄ°ÅÄ°M -->
                <div class="step-content" data-step="4">
                    <div class="form-group">
                        <label for="aciklama">Sorun AÃ§Ä±klamasÄ± *</label>
                        <textarea id="aciklama" class="form-control" rows="4" required placeholder="Sorunu detaylÄ± bir ÅŸekilde aÃ§Ä±klayÄ±n..."></textarea>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="iletisimAd">AdÄ±nÄ±z (Opsiyonel)</label>
                            <input type="text" id="iletisimAd" class="form-control" placeholder="AdÄ±nÄ±z">
                        </div>
                        <div class="form-group">
                            <label for="iletisimTel">Telefon (Opsiyonel)</label>
                            <input type="tel" id="iletisimTel" class="form-control" placeholder="05XX XXX XX XX">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="onay" style="width: auto; margin-right: 8px;">
                            Bildirimin halka aÃ§Ä±k listede gÃ¶rÃ¼ntÃ¼lenmesini onaylÄ±yorum.
                        </label>
                    </div>
                </div>
            </div>
            
            <div class="modal-footer">
                <button class="btn" id="geriBtn" disabled onclick="prevStep()">
                    <span>â—€</span> Geri
                </button>
                <div>
                    <span id="stepInfo" style="color: #666; font-weight: 600;">AdÄ±m 1/4</span>
                </div>
                <button class="btn btn-primary" id="ileriBtn" onclick="nextStep()">
                    Ä°leri <span>â–¶</span>
                </button>
            </div>
        </div>
    </div>

    <!-- JavaScript KodlarÄ± -->
    <script>
        // =============================================
        // GENEL DEÄÄ°ÅKENLER VE AYARLAR
        // =============================================
        const DB_NAME = 'altyapiBildirimDB_v2';
        const ADMIN_PASSWORD = 'deryasara';
        const ADMIN_KEY = 'altyapi2026';
        let currentStep = 1;
        let isAdminLoggedIn = false;
        
        // =============================================
        // SOKAK/CADDE VERÄ°TABANI
        // =============================================
        const sokakVeritabani = {
            "Kaynartepe": ["195. Sokak",
                "196. Sokak",
                "197. Sokak",
                "198. Sokak",
                "199. Sokak",
                "200. Sokak",
                "201. Sokak",
                "202. Sokak",
                "202/1. Ã‡Ä±kmaz Sokak",
                "202/2. Ã‡Ä±kmaz Sokak",
                "202/3. Ã‡Ä±kmaz Sokak",
                "202/4. Ã‡Ä±kmaz Sokak",
                "203. Sokak",
                "204. Sokak",
                "205. Sokak",
                "206. Sokak",
                "207. Sokak",
                "208. Sokak",
                "209. Sokak",
                "210. Sokak",
                "211. Sokak",
                "212. Sokak",
                "213. Sokak",
                "214. Sokak",
                "215. Sokak",
                "216. Sokak",
                "217. Sokak",
                "218. Sokak",
                "219. Sokak",
                "220. Sokak",
                "221. Sokak",
                "222. Sokak",
                "222/1. Ã‡Ä±kmaz Sokak",
                "223. Sokak",
                "224. Sokak",
                "225. Sokak",
                "226. Sokak",
                "227. Sokak",
                "228. Sokak",
                "229. Sokak",
                "230. Sokak",
                "231. Sokak",
                "231. Ã‡Ä±kmaz Sokak",
                "231/1. Ã‡Ä±kmaz Sokak",
                "231/2. Ã‡Ä±kmaz Sokak",
                "232. Sokak",
                "232/1. Sokak",
                "233. Sokak",
                "234. Sokak",
                "234/3. Ã‡Ä±kmaz Sokak",
                "234/6. Ã‡Ä±kmaz Sokak",
                "235. Sokak",
                "235/1. Ã‡Ä±kmaz Sokak",
                "235/2. Ã‡Ä±kmaz Sokak",
                "236. Sokak",
                "237. Sokak",
                "238. Sokak",
                "239. Sokak",
                "240. Sokak",
                "241. Sokak",
                "242. Sokak",
                "243. Sokak",
                "244. Sokak",
                "245. Sokak",
                "246. Sokak",
                "247. Sokak",
                "248. Sokak",
                "249. Sokak",
                "250. Sokak",
                "250/1. Ã‡Ä±kmaz Sokak",
                "251. Sokak",
                "251/1. Ã‡Ä±kmaz Sokak",
                "251/2. Ã‡Ä±kmaz Sokak",
                "252. Sokak",
                "253. Sokak",
                "254. Sokak",
                "255. Sokak",
                "256. Sokak",
                "257. Sokak",
                "258. Sokak",
                "258/1. Ã‡Ä±kmaz Sokak",
                "258/2. Ã‡Ä±kmaz Sokak",
                "258/3. Ã‡Ä±kmaz Sokak",
                "258/4. Ã‡Ä±kmaz Sokak",
                "258/5. Ã‡Ä±kmaz Sokak",
                "258-6. Ã‡Ä±kmaz Sokak",
                "259. Sokak",
                "260. Sokak",
                "261. Sokak",
                "262. Sokak",
                "263. Sokak",
                "264. Sokak",
                "265. Sokak",
                "266. Sokak",
                "266/1. Ã‡Ä±kmaz Sokak",
                "267. Sokak",
                "268. Sokak",
                "269. Sokak",
                "270. Sokak",
                "271. Sokak",
                "272. Sokak",
                "273. Sokak",
                "274. Sokak",
                "275. Sokak",
                "276. Sokak",
                "277. Sokak",
                "278. Sokak",
                "279. Sokak",
                "280. Sokak",
                "281. Sokak",
                "281-1. Ã‡Ä±kmaz Sokak",
                "281/2. Ã‡Ä±kmaz Sokak",
                "281/3. Ã‡Ä±kmaz Sokak",
                "282. Sokak",
                "282/1. Ã‡Ä±kmaz Sokak",
                "283. Sokak",
                "284. Sokak",
                "284-2. Ã‡Ä±kmaz Sokak",
                "284.9. Ã‡Ä±kmaz Sokak",
                "284.10. Ã‡Ä±kmaz Sokak",
                "284/1. Ã‡Ä±kmaz Sokak",
                "285. Sokak",
                "286. Sokak",
                "287. Sokak",
                "288. Sokak",
                "289. Sokak",
                "290. Sokak",
                "290-1. Ã‡Ä±kmaz Sokak",
                "291. Sokak",
                "292. Sokak",
                "293. Sokak",
                "294. Sokak",
                "295. Sokak",
                "296. Sokak",
                "297. Sokak",
                "298. Sokak",
                "299. Sokak",
                "300. Sokak",
                "301. Sokak",
                "302. Sokak",
                "302-1. Ã‡Ä±kmaz Sokak",
                "302-3. Ã‡Ä±kmaz Sokak",
                "302-4. Ã‡Ä±kmaz Sokak",
                "302/2. Ã‡Ä±kmaz Sokak",
                "303. Sokak",
                "304. Sokak",
                "305. Sokak",
                "306. Sokak",
                "307. Sokak",
                "308. Sokak",
                "309. Sokak",
                "310. Sokak",
                "CemiloÄŸlu Cadde",
                "GÃ¼rsel Cadde",
                "NÃ¼khet CoÅŸkun Cadde",
                "Sunay Cadde"
              ],
            "Muradiye": ["BarÄ±ÅŸ Caddesi", "Muradiye Sokak", "Åehitler Caddesi"],
            "Fatih": ["Girne Caddesi", "Fatih Sokak", "Cumhuriyet Caddesi"],
            "Mevlana Halit": ["BaÄŸcÄ±lar Caddesi", "Mevlana Sokak"],
            "YeniÅŸehir": ["YeniÅŸehir Caddesi", "AtatÃ¼rk BulvarÄ±", "Ã‡evreyolu"],
            "SelÃ§uklu": [
                "10. SOKAK",
                "11. SOKAK",
                "12. SOKAK",
                "13. SOKAK",
                "14. SOKAK",
                "15. SOKAK",
                "24. SOKAK",
                "25. SOKAK",
                "8. SOKAK",
                "15 TEMMUZ ÅEHÄ°TLER CADDE",
                "70.YIL CADDE",
                "AKASYA SOKAK",
                "ARTUKBEY SOKAK",
                "AYDEMÄ°R CADDE",
                "BAHADIR SOKAK",
                "BAKAÃ‡ SOKAK",
                "BAÅAK SOKAK",
                "BELEDÄ°YE SOKAK",
                "BÄ°LAL SOKAK",
                "BUHARA SOKAK",
                "BURAK CADDE",
                "CAHAR DUDAYEV CADDE",
                "CEMÄ°L KIRIMOÄLU SOKAK",
                "Ã‡ELEBÄ° CADDE",
                "DADAÅ CADDE",
                "DENÄ°Z CADDE",
                "DENÄ°Z FENERÄ° CADDE",
                "DERYA SOKAK",
                "DÄ°YANET SOKAK",
                "E 80 BULVAR",
                "E 80- BULVAR",
                "EMÄ°RÅEYH CADDE",
                "ESER SOKAK",
                "ETHEMBABA CADDE",
                "FAHRÄ° FINDIKOÄLU SOKAK",
                "FAZÄ°LET SOKAK",
                "FÄ°NCANCI SOKAK",
                "GAMZE SOKAK",
                "GAZÄ° AHMET ALPAÄUZ SOKAK",
                "GAZÄ° FERÄ°T IÅIK SOKAK",
                "GAZÄ° FUAT AKGÃœL SOKAK",
                "GÃœLÃœM SOKAK",
                "GÃœLYAKUT SOKAK",
                "GÃœNEY SOKAK",
                "GÃœVENLÄ°K ARKASI SOKAK",
                "HABÄ°PBABA CADDE",
                "HACI MEVLÃœT BABA SOKAK",
                "HACI MUSTAFA BAKAN SOKAK",
                "HAKKI MEZARARKALI SOKAK",
                "HÄ°KMET SOKAK",
                "HÄ°LAL SOKAK",
                "IHLAMUR SOKAK",
                "Ä°SA YUSUF ALPTEKÄ°N CADDE",
                "Ä°SMAÄ°L SAÄ°B SENCER SOKAK",
                "Ä°STÄ°KLAL CADDE",
                "KANARYA CADDE",
                "KOCA MÃœFTÃœ SOKAK",
                "LAHZA SOKAK",
                "MEHÄ°R SOKAK",
                "MEHMET HAZIK EFENDÄ° SOKAK",
                "MENZÄ°L SOKAK",
                "MUHAYYER SOKAK",
                "NÄ°YAZÄ° MISRÄ° SOKAK",
                "OÄUZ SOKAK",
                "OLÄ°MPÄ°YAT CADDE",
                "OSMANGAZÄ° CADDE",
                "Ã–NDER SOKAK",
                "PINAR SOKAK",
                "PROF. DR. NECMETTÄ°N ERBAKAN BULVAR",
                "SABA SOKAK",
                "SANCAK CADDE",
                "SEHER SOKAK",
                "SEMERKANT SOKAK",
                "SERDENGEÃ‡TÄ° SOKAK",
                "SEVGÄ° EVLER SOKAK",
                "SULTAN MURAT CADDE",
                "SUNGURBEY SOKAK",
                "SUSAM SOKAK",
                "ÅEHÄ°T BAÅÃ‡AVUÅ TAHSÄ°N YORGUN SOKAK",
                "ÅEHÄ°T Ã‡AVUÅ EKREM Ã–ZMEN SOKAK",
                "ÅEHÄ°T Ã‡AVUÅ Ä°LHAMÄ° TOPÃ‡U SOKAK",
                "ÅEHÄ°T Ã‡AVUÅ NEJDET DÄ°LER SOKAK",
                "ÅEHÄ°T ER OSMAN ERHAN SOKAK",
                "ÅEHÄ°T ER TEYMUR TARI SOKAK",
                "ÅEHÄ°T EREN BÃœLBÃœL CADDE",
                "ÅEHÄ°T FÄ°KRET SÃ–ÄÃœTLER CADDE",
                "ÅEHÄ°T MEVLÃœT GENÃ‡OÄLU SOKAK",
                "ÅEHÄ°T ONBAÅI GÃœLTEKÄ°N ÅENOL CADDE",
                "ÅEHÄ°T ONBAÅI Ã–MER BUDAK CADDE",
                "ÅEHÄ°T PÄ°YADE UZMAN ONBAÅI PEHLÃœL ORUK SOKAK",
                "ÅEHÄ°T RECEP BAÄCI CADDE",
                "ÅEHÄ°T UZMAN Ã‡AVUÅ KADÄ°R KAYVENÄ° CADDE",
                "TARIMSAL ARAÅTIRMA- SOKAK",
                "TAÅKENT SOKAK",
                "TAÅKESENLÄ° SOKAK",
                "TAVLAÅOÄLU SOKAK",
                "UFUK SOKAK",
                "USVE SOKAK",
                "YAVÄ° SOKAK",
                "YILDIRIM BEYAZIT CADDE",
                "YÄ°ÄÄ°TLER SOKAK"
                ],
            "BostaniÃ§i": ["Ä°pekyolu Caddesi", "BostaniÃ§i Sokak"],
            "Ä°skele": ["Ä°skele Caddesi", "Sahil Yolu"],
            "TepebaÅŸÄ±": ["Cumhuriyet Caddesi", "TepebaÅŸÄ± Sokak"],
            "YeniÅŸehir": ["Vali Ozan Caddesi", "YeniÅŸehir BulvarÄ±"],
            "DevteyÅŸti": ["Ä°mam BakÄ±r Caddesi", "DevteyÅŸti Sokak"]
        };
        
        // =============================================
        // VERÄ° SETÄ° - 23 Ä°L, 154 Ä°LÃ‡E, 1200+ MAHALLE
        // =============================================
        const sehirlerData = {
            "DÄ°YARBAKIR": {
                ilceler: ["BaÄŸlar", "KayapÄ±nar", "Sur", "YeniÅŸehir", "Bismil", "Silvan", "Ergani", "Kulp", "Lice", "Hazro", "Hani", "Ã‡Ä±nar", "Dicle", "EÄŸil", "KocakÃ¶y"],
                mahalleler: {
                    "BaÄŸlar": ["Kaynartepe", "Muradiye", "Fatih", "Mevlana Halit", "BarÄ±ÅŸ", "YeniÅŸehir", "Huzurevleri"],
                    "KayapÄ±nar": ["Åehitlik", "YenikÃ¶y", "KÃ¶ÅŸkler", "GÃ¶zegÃ¶l", "Peyas"],
                    "Sur": ["CevatpaÅŸa", "HasÄ±rlÄ±", "SavaÅŸ", "Cemal YÄ±lmaz", "AlipaÅŸa"]
                }
            },
            "MARDÄ°N": {
                ilceler: ["Artuklu", "KÄ±zÄ±ltepe", "Nusaybin", "Midyat", "Derik", "MazÄ±daÄŸÄ±", "Savur", "DargeÃ§it", "Ã–merli", "YeÅŸilli"],
                mahalleler: {
                    "Artuklu": ["YeniÅŸehir", "Cumhuriyet", "Åar", "DiyarbakÄ±rkapÄ±"],
                    "KÄ±zÄ±ltepe": ["TepebaÅŸÄ±", "Cumhuriyet", "BahÃ§elievler", "Yenimahalle"],
                    "Nusaybin": ["AbdulkadirpaÅŸa", "Cumhuriyet", "FÄ±rat", "YeniÅŸehir"]
                }
            },
            "ÅANLIURFA": {
                ilceler: ["Haliliye", "EyyÃ¼biye", "KarakÃ¶prÃ¼", "Siverek", "ViranÅŸehir", "SuruÃ§", "Birecik", "Halfeti", "Bozova", "Harran", "AkÃ§akale", "CeylanpÄ±nar"],
                mahalleler: {
                    "Haliliye": ["DevteyÅŸti", "Selahaddini Eyyubi", "BaÄŸlarbaÅŸÄ±", "KÄ±ÅŸla"],
                    "EyyÃ¼biye": ["AkÅŸemsettin", "Mevlana", "Yavuzselim", "KarÅŸÄ±yaka"],
                    "ViranÅŸehir": ["YeniÅŸehir", "Cumhuriyet", "Fatih", "BahÃ§elievler"]
                }
            },
            "VAN": {
                ilceler: ["Ä°pekyolu", "TuÅŸba", "Edremit", "ErciÅŸ", "Ã–zalp", "BaÅŸkale", "GÃ¼rpÄ±nar", "Muradiye", "Ã‡atak", "BahÃ§esaray", "Saray"],
                mahalleler: {
                    "Ä°pekyolu": ["BostaniÃ§i", "Cumhuriyet", "Karasu", "HacÄ±bekir"],
                    "TuÅŸba": ["Ä°skele", "Ã‡arÅŸÄ±", "Kalecik", "SÄ±hke"],
                    "ErciÅŸ": ["Vanyolu", "Cumhuriyet", "YeniÅŸehir", "GÃ¶lbaÅŸÄ±"]
                }
            },
            "HAKKARÄ°": {
                ilceler: ["Merkez", "YÃ¼ksekova", "Åemdinli", "Ã‡ukurca"],
                mahalleler: {
                    "Merkez": ["DaÄŸgÃ¶l", "Cumhuriyet", "BahÃ§elievler", "YeniÅŸehir"],
                    "YÃ¼ksekova": ["GÃ¼ngÃ¶r", "Cumhuriyet", "Merkez", "YeniÅŸehir"],
                    "Åemdinli": ["Moda", "Cumhuriyet", "Merkez"]
                }
            },
            "ÅIRNAK": {
                ilceler: ["Merkez", "Cizre", "Silopi", "Ä°dil", "Uludere", "BeytÃ¼ÅŸÅŸebap", "GÃ¼Ã§lÃ¼konak"],
                mahalleler: {
                    "Cizre": ["Nur", "Cumhuriyet", "YeniÅŸehir", "Dicle"],
                    "Silopi": ["BaÅŸak", "Cumhuriyet", "Merkez", "YeniÅŸehir"],
                    "Ä°dil": ["Turgut Ã–zal", "Cumhuriyet", "Merkez"]
                }
            },
            "BATMAN": {
                ilceler: ["Merkez", "Kozluk", "Sason", "Hasankeyf", "BeÅŸiri", "GercÃ¼ÅŸ"],
                mahalleler: {
                    "Merkez": ["Ä°luh", "Petrolkent", "YeniÅŸehir", "BahÃ§elievler"],
                    "Kozluk": ["Tepecik", "Cumhuriyet", "Merkez"],
                    "Sason": ["Cumhuriyet", "Merkez", "YeniÅŸehir"]
                }
            },
            "SÄ°Ä°RT": {
                ilceler: ["Merkez", "Kurtalan", "Baykan", "Eruh", "Åirvan", "Tillo"],
                mahalleler: {
                    "Kurtalan": ["Tekel", "Cumhuriyet", "Merkez"],
                    "Merkez": ["Kooperatif", "Cumhuriyet", "YeniÅŸehir"]
                }
            },
            "MUÅ": {
                ilceler: ["Merkez", "BulanÄ±k", "Malazgirt", "Varto", "Korkut", "HaskÃ¶y"],
                mahalleler: {
                    "BulanÄ±k": ["Zafer", "Cumhuriyet", "Merkez"],
                    "Varto": ["GÃ¼mgÃ¼m", "Cumhuriyet", "Merkez"],
                    "Merkez": ["Cumhuriyet", "YeniÅŸehir", "BahÃ§elievler"]
                }
            },
            "BÄ°TLÄ°S": {
                ilceler: ["Merkez", "Tatvan", "Ahlat", "Hizan", "GÃ¼roymak", "Adilcevaz"],
                mahalleler: {
                    "Tatvan": ["KarÅŸÄ±yaka", "Cumhuriyet", "Sahil"],
                    "GÃ¼roymak": ["BahÃ§elievler", "Cumhuriyet", "Merkez"],
                    "Ahlat": ["Cumhuriyet", "Merkez", "Sahil"]
                }
            },
            "AÄRI": {
                ilceler: ["Merkez", "DoÄŸubayazÄ±t", "Patnos", "Diyadin", "EleÅŸkirt", "Hamur", "TaÅŸlÄ±Ã§ay"],
                mahalleler: {
                    "DoÄŸubayazÄ±t": ["Yeni", "Cumhuriyet", "Merkez"],
                    "Patnos": ["AtatÃ¼rk", "Cumhuriyet", "Merkez"],
                    "Merkez": ["Cumhuriyet", "YeniÅŸehir"]
                }
            },
            "IÄDIR": {
                ilceler: ["Merkez", "Tuzluca", "AralÄ±k", "Karakoyunlu"],
                mahalleler: {
                    "Merkez": ["BaÄŸlar", "Cumhuriyet", "YeniÅŸehir"],
                    "Tuzluca": ["Ä°nÃ¶nÃ¼", "Cumhuriyet", "Merkez"]
                }
            },
            "TUNCELÄ°": {
                ilceler: ["Merkez", "OvacÄ±k", "Hozat", "PÃ¼lÃ¼mÃ¼r", "NazÄ±miye", "Mazgirt", "Pertek", "Ã‡emiÅŸgezek"],
                mahalleler: {
                    "Merkez": ["Alibaba", "Cumhuriyet", "YeniÅŸehir"],
                    "OvacÄ±k": ["Cumhuriyet", "Merkez"],
                    "Pertek": ["Cumhuriyet", "Merkez", "Sahil"]
                }
            },
            "BÄ°NGÃ–L": {
                ilceler: ["Merkez", "GenÃ§", "Solhan", "KarlÄ±ova", "KiÄŸÄ±", "Yayladere", "Yedisu", "AdaklÄ±"],
                mahalleler: {
                    "Merkez": ["Simani", "Cumhuriyet", "YeniÅŸehir"],
                    "GenÃ§": ["Yeni", "Cumhuriyet", "Merkez"]
                }
            },
            "ERZURUM": {
                ilceler: ["Aziziye", "Yakutiye", "PalandÃ¶ken", "Oltu", "Horasan", "HÄ±nÄ±s", "KaraÃ§oban", "KarayazÄ±", "Tekman", "Pasinler", "AÅŸkale", "Åenkaya", "Tortum", "Uzundere", "Ä°spir", "Ã‡at", "Olur", "Pazaryolu"],
                mahalleler: {
                    "Aziziye": ["SelÃ§uklu", "DadaÅŸkent", "YÄ±ldÄ±zkent", "Erzurum"],
                    "Yakutiye": ["Cumhuriyet", "YeniÅŸehir", "Mumcu"],
                    "PalandÃ¶ken": ["Yunusemre", "YÄ±ldÄ±z", "Ã‡aykara"]
                }
            },
            "ADIYAMAN": {
                ilceler: ["Merkez", "Kahta", "Besni", "GÃ¶lbaÅŸÄ±", "Gerger", "Sincik", "Ã‡elikhan", "Tut", "Samsat"],
                mahalleler: {
                    "Kahta": ["Yavuz Selim", "Cumhuriyet", "AtatÃ¼rk"],
                    "Merkez": ["Cumhuriyet", "YeniÅŸehir", "AtatÃ¼rk"]
                }
            },
            "ELAZIÄ": {
                ilceler: ["Merkez", "KarakoÃ§an", "KovancÄ±lar", "Maden", "Baskil", "Palu", "ArÄ±cak", "Sivrice", "AÄŸÄ±n", "Alacakaya", "Keban"],
                mahalleler: {
                    "KarakoÃ§an": ["Yeni", "Cumhuriyet", "Merkez"],
                    "Merkez": ["Cumhuriyet", "YeniÅŸehir", "Harput"]
                }
            },
            "KARS": {
                ilceler: ["Merkez", "Digor", "KaÄŸÄ±zman", "SarÄ±kamÄ±ÅŸ", "Selim", "Susuz", "ArpaÃ§ay", "Akyaka"],
                mahalleler: {
                    "KaÄŸÄ±zman": ["BayrampaÅŸa", "Cumhuriyet", "Merkez"],
                    "Merkez": ["Cumhuriyet", "YeniÅŸehir", "AtatÃ¼rk"]
                }
            },
            "ARDAHAN": {
                ilceler: ["Merkez", "GÃ¶le", "Ã‡Ä±ldÄ±r", "Hanak", "Posof", "Damal"],
                mahalleler: {
                    "GÃ¶le": ["Yenimahalle", "Cumhuriyet", "Merkez"],
                    "Merkez": ["Cumhuriyet", "YeniÅŸehir"]
                }
            },
            "GAZÄ°ANTEP": {
                ilceler: ["Åahinbey", "Åehitkamil", "Nizip", "Ä°slahiye", "NurdaÄŸÄ±", "Araban", "OÄŸuzeli", "Yavuzeli", "KarkamÄ±ÅŸ"],
                mahalleler: {
                    "Åahinbey": ["KarataÅŸ", "Cumhuriyet", "Åehitkamil"],
                    "Åehitkamil": ["Cumhuriyet", "YeniÅŸehir", "AtatÃ¼rk"]
                }
            },
            "MALATYA": {
                ilceler: ["YeÅŸilyurt", "Battalgazi", "DoÄŸanÅŸehir", "AkÃ§adaÄŸ", "Darende", "Hekimhan", "PÃ¼tÃ¼rge", "YazÄ±han", "Arapgir", "Arguvan", "Kale", "Kuluncak"],
                mahalleler: {
                    "YeÅŸilyurt": ["Ã‡ilesiz", "Cumhuriyet", "YeniÅŸehir"],
                    "Battalgazi": ["Cumhuriyet", "AtatÃ¼rk", "Merkez"]
                }
            },
            "KAHRAMANMARAÅ": {
                ilceler: ["DulkadiroÄŸlu", "OnikiÅŸubat", "AfÅŸin", "Elbistan", "PazarcÄ±k", "GÃ¶ksun", "AndÄ±rÄ±n", "Ã‡aÄŸlayancerit", "EkinÃ¶zÃ¼", "Nurhak", "TÃ¼rkoÄŸlu"],
                mahalleler: {
                    "DulkadiroÄŸlu": ["NamÄ±k Kemal", "Cumhuriyet", "AtatÃ¼rk"],
                    "OnikiÅŸubat": ["Cumhuriyet", "YeniÅŸehir", "AtatÃ¼rk"]
                }
            },
            "TRABZON": {
                ilceler: ["Ortahisar", "AkÃ§aabat", "AraklÄ±", "Arsin", "BeÅŸikdÃ¼zÃ¼", "Ã‡arÅŸÄ±baÅŸÄ±", "Ã‡aykara", "DernekpazarÄ±", "DÃ¼zkÃ¶y", "Hayrat", "KÃ¶prÃ¼baÅŸÄ±", "MaÃ§ka", "Of", "SÃ¼rmene", "ÅalpazarÄ±", "Tonya", "VakfÄ±kebir", "Yomra"],
                mahalleler: {
                    "Ortahisar": ["Cumhuriyet", "YeniÅŸehir", "AtatÃ¼rk"],
                    "AkÃ§aabat": ["Cumhuriyet", "Merkez", "Sahil"]
                }
            }
        };
        
        // Sorun tipleri ve emojileri
        const sorunTipleri = [
            { id: "su", emoji: "ğŸ’§", label: "Su Sorunu", desc: "Kesinti, basÄ±nÃ§ dÃ¼ÅŸÃ¼klÃ¼ÄŸÃ¼, kalite" },
            { id: "elektrik", emoji: "âš¡", label: "Elektrik", desc: "Kesinti, voltaj, arÄ±za" },
            { id: "yol", emoji: "ğŸ›£ï¸", label: "Yol", desc: "Ã‡Ã¶kme, bozuk yol, kaldÄ±rÄ±m" },
            { id: "kanalizasyon", emoji: "ğŸš½", label: "Kanalizasyon", desc: "TÄ±kanÄ±klÄ±k, taÅŸma, koku" },
            { id: "internet", emoji: "ğŸ“¡", label: "Ä°nternet", desc: "AltyapÄ± eksikliÄŸi, yavaÅŸlÄ±k" },
            { id: "telekom", emoji: "ğŸ“", label: "Telekom", desc: "Telefon hattÄ±, baz istasyonu" },
            { id: "agac", emoji: "ğŸŒ³", label: "AÄŸaÃ§/Tescil", desc: "Devrilen aÄŸaÃ§, budama" },
            { id: "cÃ¶p", emoji: "ğŸ—‘ï¸", label: "Ã‡Ã¶p Toplama", desc: "DÃ¼zensiz toplama, koku" },
            { id: "aydinlatma", emoji: "ğŸ’¡", label: "AydÄ±nlatma", desc: "ArÄ±zalÄ± sokak lambasÄ±" },
            { id: "park", emoji: "ğŸ›", label: "Park/BahÃ§e", desc: "Ã‡ocuk parkÄ±, yeÅŸil alan" },
            { id: "trafik", emoji: "ğŸš¦", label: "Trafik", desc: "IÅŸÄ±k, iÅŸaret, kavÅŸak" },
            { id: "guvenlik", emoji: "ğŸ‘®", label: "GÃ¼venlik", desc: "Kamera, gÃ¼venlik eksikliÄŸi" },
            { id: "diger", emoji: "â“", label: "DiÄŸer", desc: "DiÄŸer altyapÄ± sorunlarÄ±" }
        ];
        
        // =============================================
        // SAYFA YÃœKLENDÄ°ÄÄ°NDE Ã‡ALIÅACAK KODLAR
        // =============================================
        document.addEventListener('DOMContentLoaded', function() {
            console.log("ğŸš€ AltyapÄ± Bildirim Sistemi baÅŸlatÄ±lÄ±yor...");
            
            // VeritabanÄ±nÄ± baÅŸlat
            veritabaniBaslat();
            
            // Åehir listesini doldur
            loadSehirler();
            
            // Sorun emojilerini yÃ¼kle
            loadSorunEmojileri();
            
            // Ana sayfa istatistiklerini yÃ¼kle
            loadHomeStats();
            
            // Event listener'larÄ± ekle
            setupEventListeners();
            
            // URL'den sayfa kontrolÃ¼
            const urlParams = new URLSearchParams(window.location.search);
            const page = urlParams.get('page');
            if (page && ['home', 'list', 'stats', 'admin'].includes(page)) {
                showPage(page);
            }
            
            console.log("âœ… Sistem hazÄ±r!");
            
            // Admin durumunu kontrol et
            checkAdminStatus();
        });
        
        // =============================================
        // EVENT LISTENER'LAR
        // =============================================
        function setupEventListeners() {
            // MenÃ¼ butonlarÄ±
            document.querySelectorAll('.nav-btn').forEach(btn => {
                if (btn.id !== 'adminBtn') {
                    btn.addEventListener('click', function() {
                        const pageId = this.getAttribute('data-page');
                        showPage(pageId);
                    });
                }
            });
            
            // Admin butonu
            document.getElementById('adminBtn').addEventListener('click', function() {
                showPage('admin');
            });
            
            // Yeni bildirim butonlarÄ±
            document.getElementById('yeniBildirimBtn').addEventListener('click', openModal);
            document.getElementById('heroBildirimBtn').addEventListener('click', openModal);
            
            // Åehir deÄŸiÅŸince ilÃ§eleri yÃ¼kle
            document.getElementById('sehir').addEventListener('change', function() {
                loadIlceler(this.value);
            });
            
            // Ä°lÃ§e deÄŸiÅŸince mahalleleri yÃ¼kle
            document.getElementById('ilce').addEventListener('change', function() {
                loadMahalleler(document.getElementById('sehir').value, this.value);
            });
            
            // Mahalle deÄŸiÅŸince sokaklarÄ± yÃ¼kle
            document.getElementById('mahalle').addEventListener('change', function() {
                loadSokaklar(this.value);
            });
            
            // Sokak seÃ§imi deÄŸiÅŸince
            document.getElementById('sokak').addEventListener('change', function() {
                const manuelInput = document.getElementById('manuelSokak');
                if (this.value === 'diger') {
                    manuelInput.style.display = 'block';
                } else {
                    manuelInput.style.display = 'none';
                    manuelInput.value = '';
                }
            });
            
            // Sorun emoji seÃ§imi
            document.addEventListener('click', function(e) {
                if (e.target.closest('.emoji-option')) {
                    const option = e.target.closest('.emoji-option');
                    document.querySelectorAll('.emoji-option').forEach(o => o.classList.remove('selected'));
                    option.classList.add('selected');
                    document.getElementById('sorunTipi').value = option.dataset.value;
                }
                
                // Aciliyet seÃ§imi
                if (e.target.closest('.aciliyet-btn')) {
                    const btn = e.target.closest('.aciliyet-btn');
                    document.querySelectorAll('.aciliyet-btn').forEach(b => b.classList.remove('selected'));
                    btn.classList.add('selected');
                    document.getElementById('aciliyet').value = btn.dataset.aciliyet;
                }
            });
            
            // Filtre seÃ§imleri
            document.getElementById('filterSehir').addEventListener('change', function() {
                loadFilterIlceler(this.value);
            });
            
            document.getElementById('filterIlce').addEventListener('change', function() {
                loadFilterMahalleler(document.getElementById('filterSehir').value, this.value);
            });
        }
        
        // =============================================
        // SOKAK YÃœKLEME FONKSÄ°YONU (YENÄ° EKLENDÄ°)
        // =============================================
        function loadSokaklar(mahalle) {
            const sokakSelect = document.getElementById('sokak');
            const manuelInput = document.getElementById('manuelSokak');
            
            sokakSelect.innerHTML = '<option value="">Cadde/Sokak SeÃ§in (Opsiyonel)</option>';
            sokakSelect.disabled = true;
            manuelInput.style.display = 'none';
            manuelInput.value = '';
            
            if (sokakVeritabani[mahalle]) {
                sokakSelect.disabled = false;
                
                sokakVeritabani[mahalle].forEach(sokak => {
                    const option = document.createElement('option');
                    option.value = sokak;
                    option.textContent = sokak;
                    sokakSelect.appendChild(option);
                });
                
                // "DiÄŸer" seÃ§eneÄŸini ekle
                const otherOption = document.createElement('option');
                otherOption.value = 'diger';
                otherOption.textContent = 'DiÄŸer (manuel girin)';
                sokakSelect.appendChild(otherOption);
            }
        }
        
        // =============================================
        // SAYFA YÃ–NETÄ°MÄ°
        // =============================================
        function showPage(pageId) {
            // TÃ¼m sayfalarÄ± gizle
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            // SeÃ§ilen sayfayÄ± gÃ¶ster
            document.getElementById(pageId).classList.add('active');
            
            // MenÃ¼ butonlarÄ±nÄ± gÃ¼ncelle
            document.querySelectorAll('.nav-btn').forEach(btn => {
                if (btn.getAttribute('data-page') === pageId) {
                    btn.classList.add('active');
                } else {
                    btn.classList.remove('active');
                }
            });
            
            // Admin butonunu Ã¶zel yÃ¶net
            if (pageId === 'admin') {
                document.getElementById('adminBtn').classList.add('active');
            }
            
            // Sayfaya Ã¶zel iÅŸlemler
            switch(pageId) {
                case 'list':
                    loadBildirimler();
                    loadFilterSehirler();
                    break;
                case 'stats':
                    loadDetayliIstatistikler();
                    break;
                case 'admin':
                    checkAdminStatus();
                    break;
            }
            
            // URL'yi gÃ¼ncelle
            history.pushState(null, '', `?page=${pageId}`);
        }
        
        // =============================================
        // MODAL (AÃ§Ä±lÄ±r Pencere) YÃ–NETÄ°MÄ°
        // =============================================
        function openModal() {
            document.getElementById('bildirimModal').classList.add('active');
            resetForm();
        }
        
        function closeModal() {
            document.getElementById('bildirimModal').classList.remove('active');
            resetForm();
        }
        
        function resetForm() {
            currentStep = 1;
            updateStepUI();
            
            // Form alanlarÄ±nÄ± temizle
            document.getElementById('sehir').value = '';
            document.getElementById('ilce').value = '';
            document.getElementById('ilce').disabled = true;
            document.getElementById('mahalle').value = '';
            document.getElementById('mahalle').disabled = true;
            document.getElementById('sokak').value = '';
            document.getElementById('sokak').disabled = true;
            document.getElementById('manuelSokak').value = '';
            document.getElementById('manuelSokak').style.display = 'none';
            document.getElementById('sorunTipi').value = '';
            document.getElementById('aciliyet').value = '';
            document.getElementById('aciklama').value = '';
            document.getElementById('iletisimAd').value = '';
            document.getElementById('iletisimTel').value = '';
            document.getElementById('onay').checked = false;
            
            // SeÃ§imleri temizle
            document.querySelectorAll('.emoji-option').forEach(o => o.classList.remove('selected'));
            document.querySelectorAll('.aciliyet-btn').forEach(b => b.classList.remove('selected'));
        }
        
        // =============================================
        // ADIMLI FORM YÃ–NETÄ°MÄ°
        // =============================================
        function updateStepUI() {
            // AdÄ±m gÃ¶stergesini gÃ¼ncelle
            document.querySelectorAll('.step').forEach((step, index) => {
                step.classList.remove('active', 'completed');
                if (index + 1 === currentStep) {
                    step.classList.add('active');
                } else if (index + 1 < currentStep) {
                    step.classList.add('completed');
                }
            });
            
            // Ä°Ã§erikleri gÃ¼ncelle
            document.querySelectorAll('.step-content').forEach(content => {
                content.classList.remove('active');
                if (parseInt(content.dataset.step) === currentStep) {
                    content.classList.add('active');
                }
            });
            
            // ButonlarÄ± gÃ¼ncelle
            document.getElementById('geriBtn').disabled = currentStep === 1;
            document.getElementById('ileriBtn').textContent = currentStep === 4 ? 'Tamamla â–¶' : 'Ä°leri â–¶';
            document.getElementById('stepInfo').textContent = `AdÄ±m ${currentStep}/4`;
            
            // Son adÄ±mda buton iÅŸlevini deÄŸiÅŸtir
            if (currentStep === 4) {
                document.getElementById('ileriBtn').onclick = submitForm;
            } else {
                document.getElementById('ileriBtn').onclick = nextStep;
            }
        }
        
        function nextStep() {
            // GeÃ§erli adÄ±mÄ± kontrol et
            if (!validateStep(currentStep)) {
                return;
            }
            
            if (currentStep < 4) {
                currentStep++;
                updateStepUI();
            }
        }
        
        function prevStep() {
            if (currentStep > 1) {
                currentStep--;
                updateStepUI();
            }
        }
        
        function validateStep(step) {
            switch(step) {
                case 1:
                    const sehir = document.getElementById('sehir').value;
                    const ilce = document.getElementById('ilce').value;
                    if (!sehir) {
                        alert('LÃ¼tfen bir ÅŸehir seÃ§in.');
                        return false;
                    }
                    if (!ilce) {
                        alert('LÃ¼tfen bir ilÃ§e seÃ§in.');
                        return false;
                    }
                    return true;
                    
                case 2:
                    const mahalle = document.getElementById('mahalle').value;
                    if (!mahalle) {
                        alert('LÃ¼tfen bir mahalle seÃ§in.');
                        return false;
                    }
                    return true;
                    
                case 3:
                    const sorunTipi = document.getElementById('sorunTipi').value;
                    const aciliyet = document.getElementById('aciliyet').value;
                    if (!sorunTipi) {
                        alert('LÃ¼tfen bir sorun tipi seÃ§in.');
                        return false;
                    }
                    if (!aciliyet) {
                        alert('LÃ¼tfen aciliyet durumunu seÃ§in.');
                        return false;
                    }
                    return true;
                    
                case 4:
                    const aciklama = document.getElementById('aciklama').value.trim();
                    if (!aciklama) {
                        alert('LÃ¼tfen sorun aÃ§Ä±klamasÄ±nÄ± girin.');
                        return false;
                    }
                    if (!document.getElementById('onay').checked) {
                        alert('LÃ¼tbildirimin halka aÃ§Ä±k listede gÃ¶rÃ¼ntÃ¼lenmesini onaylayÄ±n.');
                        return false;
                    }
                    return true;
                    
                default:
                    return true;
            }
        }
        
        // =============================================
        // VERÄ° YÃœKLEME FONKSÄ°YONLARI
        // =============================================
        function loadSehirler() {
            const select = document.getElementById('sehir');
            select.innerHTML = '<option value="">LÃ¼tfen bir ÅŸehir seÃ§in</option>';
            
            Object.keys(sehirlerData).sort().forEach(sehir => {
                const option = document.createElement('option');
                option.value = sehir;
                option.textContent = sehir;
                select.appendChild(option);
            });
        }
        
        function loadIlceler(sehir) {
            const select = document.getElementById('ilce');
            select.innerHTML = '<option value="">LÃ¼tfen bir ilÃ§e seÃ§in</option>';
            
            if (sehir && sehirlerData[sehir]) {
                select.disabled = false;
                sehirlerData[sehir].ilceler.sort().forEach(ilce => {
                    const option = document.createElement('option');
                    option.value = ilce;
                    option.textContent = ilce;
                    select.appendChild(option);
                });
            } else {
                select.disabled = true;
            }
            
            // Mahalle seÃ§imini sÄ±fÄ±rla
            document.getElementById('mahalle').value = '';
            document.getElementById('mahalle').disabled = true;
        }
        
        function loadMahalleler(sehir, ilce) {
            const select = document.getElementById('mahalle');
            select.innerHTML = '<option value="">LÃ¼tfen bir mahalle seÃ§in</option>';
            
            if (sehir && ilce && sehirlerData[sehir] && sehirlerData[sehir].mahalleler[ilce]) {
                select.disabled = false;
                sehirlerData[sehir].mahalleler[ilce].sort().forEach(mahalle => {
                    const option = document.createElement('option');
                    option.value = mahalle;
                    option.textContent = mahalle;
                    select.appendChild(option);
                });
            } else {
                select.disabled = true;
            }
            
            // Sokak seÃ§imini sÄ±fÄ±rla
            document.getElementById('sokak').value = '';
            document.getElementById('sokak').disabled = true;
            document.getElementById('manuelSokak').value = '';
            document.getElementById('manuelSokak').style.display = 'none';
        }
        
        function loadSorunEmojileri() {
            const container = document.getElementById('sorunEmojileri');
            container.innerHTML = '';
            
            sorunTipleri.forEach(sorun => {
                const div = document.createElement('div');
                div.className = 'emoji-option';
                div.dataset.value = sorun.id;
                div.innerHTML = `
                    <div class="emoji">${sorun.emoji}</div>
                    <div style="font-weight: 600;">${sorun.label}</div>
                    <div style="font-size: 12px; color: #666; margin-top: 5px;">${sorun.desc}</div>
                `;
                container.appendChild(div);
            });
        }
        
        // =============================================
        // VERÄ°TABANI Ä°ÅLEMLERÄ°
        // =============================================
        function veritabaniBaslat() {
            if (!localStorage.getItem(DB_NAME)) {
                // Ã–rnek veriler
                const ornekBildirimler = [
                    {
                        id: 1,
                        sehir: "DÄ°YARBAKIR",
                        ilce: "BaÄŸlar",
                        mahalle: "Kaynartepe",
                        cadde: "BarÄ±ÅŸ Caddesi",
                        sorunTipi: "su",
                        sorunLabel: "Su Sorunu",
                        aciliyet: "acil",
                        aciklama: "Mahallemizde 4 gÃ¼ndÃ¼r su kesintisi var. Temel ihtiyaÃ§larÄ±mÄ±zÄ± karÅŸÄ±layamÄ±yoruz.",
                        iletisim: { ad: "Ahmet YÄ±lmaz", telefon: "0532 123 4567" },
                        tarih: "2025-01-10",
                        durum: "tamamlandi",
                        tamamlanmaTarihi: "2025-01-12",
                        halkaAcik: true
                    },
                    {
                        id: 2,
                        sehir: "MARDÄ°N",
                        ilce: "Artuklu",
                        mahalle: "YeniÅŸehir",
                        cadde: "Vali Ozan Caddesi",
                        sorunTipi: "elektrik",
                        sorunLabel: "Elektrik",
                        aciliyet: "orta",
                        aciklama: "Voltaj dÃ¼ÅŸÃ¼klÃ¼ÄŸÃ¼ nedeniyle elektronik cihazlar zarar gÃ¶rÃ¼yor.",
                        iletisim: { ad: "AyÅŸe Demir", telefon: "0543 987 6543" },
                        tarih: "2025-01-11",
                        durum: "inceleniyor",
                        tamamlanmaTarihi: null,
                        halkaAcik: true
                    },
                    {
                        id: 3,
                        sehir: "ÅANLIURFA",
                        ilce: "Haliliye",
                        mahalle: "DevteyÅŸti",
                        cadde: "Ä°mam BakÄ±r Caddesi",
                        sorunTipi: "yol",
                        sorunLabel: "Yol",
                        aciliyet: "dusuk",
                        aciklama: "Cadde Ã¼zerinde derin Ã§ukur oluÅŸtu, trafik akÄ±ÅŸÄ±nÄ± engelliyor.",
                        iletisim: { ad: "", telefon: "" },
                        tarih: "2025-01-12",
                        durum: "bekliyor",
                        tamamlanmaTarihi: null,
                        halkaAcik: true
                    }
                ];
                
                localStorage.setItem(DB_NAME, JSON.stringify(ornekBildirimler));
                console.log("ğŸ“ VeritabanÄ± baÅŸlatÄ±ldÄ± (Ã¶rnek verilerle)");
            }
        }
        
        function tumBildirimleriGetir() {
            const data = localStorage.getItem(DB_NAME);
            return data ? JSON.parse(data) : [];
        }
        
        function bildirimEkle(formData) {
            const bildirimler = tumBildirimleriGetir();
            
            // Yeni ID
            const yeniId = bildirimler.length > 0 
                ? Math.max(...bildirimler.map(b => b.id)) + 1 
                : 1;
            
            // Sorun label'Ä±nÄ± bul
            const sorunObj = sorunTipleri.find(s => s.id === formData.sorunTipi);
            const sorunLabel = sorunObj ? sorunObj.label : formData.sorunTipi;
            
            // Tarih
            const today = new Date().toISOString().split('T')[0];
            
            // Yeni bildirim
            const yeniBildirim = {
                id: yeniId,
                sehir: formData.sehir,
                ilce: formData.ilce,
                mahalle: formData.mahalle,
                cadde: formData.cadde || '',
                sorunTipi: formData.sorunTipi,
                sorunLabel: sorunLabel,
                aciliyet: formData.aciliyet,
                aciklama: formData.aciklama,
                iletisim: {
                    ad: formData.iletisimAd || '',
                    telefon: formData.iletisimTel || ''
                },
                tarih: today,
                durum: "bekliyor",
                tamamlanmaTarihi: null,
                halkaAcik: formData.onay
            };
            
            bildirimler.push(yeniBildirim);
            localStorage.setItem(DB_NAME, JSON.stringify(bildirimler));
            
            return yeniBildirim;
        }
        
        function bildirimGuncelle(id, updates) {
            let bildirimler = tumBildirimleriGetir();
            const index = bildirimler.findIndex(b => b.id === id);
            
            if (index !== -1) {
                // Tamamlanma tarihi ekle
                if (updates.durum === 'tamamlandi' && !bildirimler[index].tamamlanmaTarihi) {
                    updates.tamamlanmaTarihi = new Date().toISOString().split('T')[0];
                }
                
                bildirimler[index] = { ...bildirimler[index], ...updates };
                localStorage.setItem(DB_NAME, JSON.stringify(bildirimler));
                return true;
            }
            return false;
        }
        
        function bildirimSil(id) {
            let bildirimler = tumBildirimleriGetir();
            const baslangicSayisi = bildirimler.length;
            
            bildirimler = bildirimler.filter(b => b.id !== id);
            
            if (bildirimler.length < baslangicSayisi) {
                localStorage.setItem(DB_NAME, JSON.stringify(bildirimler));
                return true;
            }
            return false;
        }
        
        // =============================================
        // FORM GÃ–NDERME (GÃœNCELLENDÄ° - SOKAK SEÃ‡Ä°MÄ° EKLENDÄ°)
        // =============================================
        function submitForm() {
            if (!validateStep(4)) {
                return;
            }
            
            // Sokak/cadde deÄŸerini al
            const sokakSelect = document.getElementById('sokak');
            const manuelSokak = document.getElementById('manuelSokak');
            const caddeSokak = sokakSelect.value === 'diger' 
                ? manuelSokak.value.trim()
                : sokakSelect.value;
            
            // Form verilerini topla
            const formData = {
                sehir: document.getElementById('sehir').value,
                ilce: document.getElementById('ilce').value,
                mahalle: document.getElementById('mahalle').value,
                cadde: caddeSokak,
                sorunTipi: document.getElementById('sorunTipi').value,
                aciliyet: document.getElementById('aciliyet').value,
                aciklama: document.getElementById('aciklama').value.trim(),
                iletisimAd: document.getElementById('iletisimAd').value.trim(),
                iletisimTel: document.getElementById('iletisimTel').value.trim(),
                onay: document.getElementById('onay').checked
            };
            
            // VeritabanÄ±na ekle
            const yeniBildirim = bildirimEkle(formData);
            
            // BaÅŸarÄ± mesajÄ±
            alert(`âœ… Bildiriminiz kaydedildi! (ID: ${yeniBildirim.id})\nEn kÄ±sa sÃ¼rede incelenecektir.`);
            
            // Modal'Ä± kapat
            closeModal();
            
            // Listeyi gÃ¼ncelle
            if (document.getElementById('list').classList.contains('active')) {
                loadBildirimler();
            }
            
            // Ä°statistikleri gÃ¼ncelle
            loadHomeStats();
            loadDetayliIstatistikler();
        }
        
        // =============================================
        // BÄ°LDÄ°RÄ°M LÄ°STESÄ°
        // =============================================
        function loadBildirimler() {
            const container = document.getElementById('bildirimListesi');
            const bildirimler = tumBildirimleriGetir();
            
            // Filtrele
            let filtrelenmis = bildirimler.filter(b => b.halkaAcik);
            
            // SayÄ±yÄ± gÃ¶ster
            document.getElementById('bildirimSayisi').textContent = 
                `${filtrelenmis.length} bildirim bulundu`;
            
            if (filtrelenmis.length === 0) {
                container.innerHTML = `
                    <div style="text-align: center; padding: 60px 20px;">
                        <div style="font-size: 60px; margin-bottom: 20px;">ğŸ“­</div>
                        <h3 style="color: #666; margin-bottom: 15px;">HenÃ¼z bildirim bulunmuyor</h3>
                        <p style="color: #999; margin-bottom: 30px;">Ä°lk bildirimi siz yaparak baÅŸlayÄ±n!</p>
                        <button class="btn btn-primary" onclick="openModal()">
                            <span>ğŸ“</span> Ä°lk Bildirimi Yap
                        </button>
                    </div>
                `;
                return;
            }
            
            // Tarihe gÃ¶re sÄ±rala (yeniden eskiye)
            filtrelenmis.sort((a, b) => new Date(b.tarih) - new Date(a.tarih));
            
            let html = '<div class="bildirim-list">';
            
            filtrelenmis.forEach(bildirim => {
                // Aciliyet badge
                const aciliyetBadge = {
                    acil: '<span class="aciliyet-badge aciliyet-acil">ğŸ”´ Acil</span>',
                    orta: '<span class="aciliyet-badge aciliyet-orta">ğŸŸ¡ Orta</span>',
                    dusuk: '<span class="aciliyet-badge aciliyet-dusuk">ğŸŸ¢ DÃ¼ÅŸÃ¼k</span>'
                }[bildirim.aciliyet] || '';
                
                // Durum badge
                const durumBadge = {
                    bekliyor: '<span class="bildirim-durum durum-bekliyor">â³ Bekliyor</span>',
                    inceleniyor: '<span class="bildirim-durum durum-inceleniyor">ğŸ” Ä°nceleniyor</span>',
                    tamamlandi: '<span class="bildirim-durum durum-tamamlandi">âœ… TamamlandÄ±</span>'
                }[bildirim.durum] || '';
                
                // Sorun emojisi
                const sorunEmoji = sorunTipleri.find(s => s.id === bildirim.sorunTipi)?.emoji || 'â“';
                
                html += `
                    <div class="bildirim-card">
                        <div class="bildirim-header">
                            <div>
                                <span class="bildirim-id">#${bildirim.id}</span>
                                <span style="margin-left: 10px;">${sorunEmoji} ${bildirim.sorunLabel}</span>
                            </div>
                            ${durumBadge}
                        </div>
                        
                        <div class="bildirim-body">
                            <div class="bildirim-detay">
                                <div class="detay-item">
                                    <span class="detay-label">Åehir</span>
                                    <span class="detay-value">${bildirim.sehir}</span>
                                </div>
                                <div class="detay-item">
                                    <span class="detay-label">Ä°lÃ§e</span>
                                    <span class="detay-value">${bildirim.ilce}</span>
                                </div>
                                <div class="detay-item">
                                    <span class="detay-label">Mahalle</span>
                                    <span class="detay-value">${bildirim.mahalle}</span>
                                </div>
                                <div class="detay-item">
                                    <span class="detay-label">Tarih</span>
                                    <span class="detay-value">${bildirim.tarih}</span>
                                </div>
                            </div>
                            
                            ${bildirim.cadde ? `
                            <div class="detay-item">
                                <span class="detay-label">Cadde/Sokak</span>
                                <span class="detay-value">${bildirim.cadde}</span>
                            </div>
                            ` : ''}
                            
                            <div style="margin-top: 15px;">
                                ${aciliyetBadge}
                            </div>
                            
                            <div style="margin-top: 20px;">
                                <div class="detay-label">AÃ§Ä±klama</div>
                                <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin-top: 8px;">
                                    ${bildirim.aciklama}
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            });
            
            html += '</div>';
            container.innerHTML = html;
        }
        
        // =============================================
        // FÄ°LTRELEME
        // =============================================
        function loadFilterSehirler() {
            const select = document.getElementById('filterSehir');
            select.innerHTML = '<option value="">TÃ¼m Åehirler</option>';
            
            // Bildirimlerdeki benzersiz ÅŸehirleri bul
            const bildirimler = tumBildirimleriGetir();
            const sehirler = [...new Set(bildirimler.map(b => b.sehir))].sort();
            
            sehirler.forEach(sehir => {
                const option = document.createElement('option');
                option.value = sehir;
                option.textContent = sehir;
                select.appendChild(option);
            });
        }
        
        function loadFilterIlceler(sehir) {
            const select = document.getElementById('filterIlce');
            select.innerHTML = '<option value="">TÃ¼m Ä°lÃ§eler</option>';
            
            if (sehir) {
                select.disabled = false;
                
                // Bildirimlerdeki benzersiz ilÃ§eleri bul
                const bildirimler = tumBildirimleriGetir();
                const ilceler = [...new Set(bildirimler
                    .filter(b => b.sehir === sehir)
                    .map(b => b.ilce))].sort();
                
                ilceler.forEach(ilce => {
                    const option = document.createElement('option');
                    option.value = ilce;
                    option.textContent = ilce;
                    select.appendChild(option);
                });
            } else {
                select.disabled = true;
            }
            
            // Mahalle seÃ§imini sÄ±fÄ±rla
            document.getElementById('filterMahalle').value = '';
            document.getElementById('filterMahalle').disabled = true;
        }
        
        function loadFilterMahalleler(sehir, ilce) {
            const select = document.getElementById('filterMahalle');
            select.innerHTML = '<option value="">TÃ¼m Mahalleler</option>';
            
            if (sehir && ilce) {
                select.disabled = false;
                
                // Bildirimlerdeki benzersiz mahalleleri bul
                const bildirimler = tumBildirimleriGetir();
                const mahalleler = [...new Set(bildirimler
                    .filter(b => b.sehir === sehir && b.ilce === ilce)
                    .map(b => b.mahalle))].sort();
                
                mahalleler.forEach(mahalle => {
                    const option = document.createElement('option');
                    option.value = mahalle;
                    option.textContent = mahalle;
                    select.appendChild(option);
                });
            } else {
                select.disabled = true;
            }
        }
        
        function applyFilters() {
            const sehir = document.getElementById('filterSehir').value;
            const ilce = document.getElementById('filterIlce').value;
            const mahalle = document.getElementById('filterMahalle').value;
            const sorun = document.getElementById('filterSorun').value;
            const aciliyet = document.getElementById('filterAciliyet').value;
            const durum = document.getElementById('filterDurum').value;
            
            const bildirimler = tumBildirimleriGetir();
            let filtrelenmis = bildirimler.filter(b => b.halkaAcik);
            
            // Filtrele
            if (sehir) filtrelenmis = filtrelenmis.filter(b => b.sehir === sehir);
            if (ilce) filtrelenmis = filtrelenmis.filter(b => b.ilce === ilce);
            if (mahalle) filtrelenmis = filtrelenmis.filter(b => b.mahalle === mahalle);
            if (sorun) filtrelenmis = filtrelenmis.filter(b => b.sorunTipi === sorun);
            if (aciliyet) filtrelenmis = filtrelenmis.filter(b => b.aciliyet === aciliyet);
            if (durum) filtrelenmis = filtrelenmis.filter(b => b.durum === durum);
            
            // GÃ¶ster
            const container = document.getElementById('bildirimListesi');
            document.getElementById('bildirimSayisi').textContent = 
                `${filtrelenmis.length} bildirim bulundu`;
            
            if (filtrelenmis.length === 0) {
                container.innerHTML = `
                    <div style="text-align: center; padding: 40px 20px; color: #666;">
                        Filtreleme kriterlerinize uygun bildirim bulunamadÄ±.
                    </div>
                `;
                return;
            }
            
            // Listeyi oluÅŸtur
            let html = '<div class="bildirim-list">';
            filtrelenmis.sort((a, b) => new Date(b.tarih) - new Date(a.tarih)).forEach(bildirim => {
                const aciliyetBadge = {
                    acil: '<span class="aciliyet-badge aciliyet-acil">ğŸ”´ Acil</span>',
                    orta: '<span class="aciliyet-badge aciliyet-orta">ğŸŸ¡ Orta</span>',
                    dusuk: '<span class="aciliyet-badge aciliyet-dusuk">ğŸŸ¢ DÃ¼ÅŸÃ¼k</span>'
                }[bildirim.aciliyet] || '';
                
                const durumBadge = {
                    bekliyor: '<span class="bildirim-durum durum-bekliyor">â³ Bekliyor</span>',
                    inceleniyor: '<span class="bildirim-durum durum-inceleniyor">ğŸ” Ä°nceleniyor</span>',
                    tamamlandi: '<span class="bildirim-durum durum-tamamlandi">âœ… TamamlandÄ±</span>'
                }[bildirim.durum] || '';
                
                const sorunEmoji = sorunTipleri.find(s => s.id === bildirim.sorunTipi)?.emoji || 'â“';
                
                html += `
                    <div class="bildirim-card">
                        <div class="bildirim-header">
                            <div>
                                <span class="bildirim-id">#${bildirim.id}</span>
                                <span style="margin-left: 10px;">${sorunEmoji} ${bildirim.sorunLabel}</span>
                            </div>
                            ${durumBadge}
                        </div>
                        
                        <div class="bildirim-body">
                            <div class="bildirim-detay">
                                <div class="detay-item">
                                    <span class="detay-label">Åehir</span>
                                    <span class="detay-value">${bildirim.sehir}</span>
                                </div>
                                <div class="detay-item">
                                    <span class="detay-label">Ä°lÃ§e</span>
                                    <span class="detay-value">${bildirim.ilce}</span>
                                </div>
                                <div class="detay-item">
                                    <span class="detay-label">Mahalle</span>
                                    <span class="detay-value">${bildirim.mahalle}</span>
                                </div>
                                <div class="detay-item">
                                    <span class="detay-label">Tarih</span>
                                    <span class="detay-value">${bildirim.tarih}</span>
                                </div>
                            </div>
                            
                            ${bildirim.cadde ? `
                            <div class="detay-item">
                                <span class="detay-label">Cadde/Sokak</span>
                                <span class="detay-value">${bildirim.cadde}</span>
                            </div>
                            ` : ''}
                            
                            <div style="margin-top: 15px;">
                                ${aciliyetBadge}
                            </div>
                            
                            <div style="margin-top: 20px;">
                                <div class="detay-label">AÃ§Ä±klama</div>
                                <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin-top: 8px;">
                                    ${bildirim.aciklama}
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            });
            
            html += '</div>';
            container.innerHTML = html;
        }
        
        function resetFilters() {
            document.getElementById('filterSehir').value = '';
            document.getElementById('filterIlce').value = '';
            document.getElementById('filterIlce').disabled = true;
            document.getElementById('filterMahalle').value = '';
            document.getElementById('filterMahalle').disabled = true;
            document.getElementById('filterSorun').value = '';
            document.getElementById('filterAciliyet').value = '';
            document.getElementById('filterDurum').value = '';
            
            loadBildirimler();
        }
        
        // =============================================
        // EXCEL Ä°NDÄ°RME
        // =============================================
        function exportToExcel() {
            const bildirimler = tumBildirimleriGetir();
            
            // Filtreleri uygula
            let filtrelenmis = bildirimler.filter(b => b.halkaAcik);
            const sehir = document.getElementById('filterSehir').value;
            const ilce = document.getElementById('filterIlce').value;
            const mahalle = document.getElementById('filterMahalle').value;
            const sorun = document.getElementById('filterSorun').value;
            const aciliyet = document.getElementById('filterAciliyet').value;
            const durum = document.getElementById('filterDurum').value;
            
            if (sehir) filtrelenmis = filtrelenmis.filter(b => b.sehir === sehir);
            if (ilce) filtrelenmis = filtrelenmis.filter(b => b.ilce === ilce);
            if (mahalle) filtrelenmis = filtrelenmis.filter(b => b.mahalle === mahalle);
            if (sorun) filtrelenmis = filtrelenmis.filter(b => b.sorunTipi === sorun);
            if (aciliyet) filtrelenmis = filtrelenmis.filter(b => b.aciliyet === aciliyet);
            if (durum) filtrelenmis = filtrelenmis.filter(b => b.durum === durum);
            
            if (filtrelenmis.length === 0) {
                alert('Ä°ndirilecek bildirim bulunamadÄ±.');
                return;
            }
            
            // CSV oluÅŸtur
            const headers = ['Åehir', 'Ä°lÃ§e', 'Mahalle', 'Sorun Tipi', 'Tarih', 'Aciliyet', 'AÃ§Ä±klama', 'Durum'];
            const rows = filtrelenmis.map(b => [
                b.sehir,
                b.ilce,
                b.mahalle,
                b.sorunLabel,
                b.tarih,
                b.aciliyet === 'acil' ? 'Acil' : b.aciliyet === 'orta' ? 'Orta' : 'DÃ¼ÅŸÃ¼k',
                b.aciklama.replace(/,/g, ';'),
                b.durum === 'bekliyor' ? 'Bekliyor' : b.durum === 'inceleniyor' ? 'Ä°nceleniyor' : 'TamamlandÄ±'
            ]);
            
            const csv = [headers.join(','), ...rows.map(row => row.join(','))].join('\n');
            
            // Blob oluÅŸtur ve indir
            const blob = new Blob(['\ufeff' + csv], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            const url = URL.createObjectURL(blob);
            link.setAttribute('href', url);
            link.setAttribute('download', `altyapi_bildirimleri_${new Date().toISOString().slice(0,10)}.csv`);
            link.style.visibility = 'hidden';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            alert(`${filtrelenmis.length} bildirim Excel (CSV) olarak indiriliyor...`);
        }
        
        // =============================================
        // Ä°STATÄ°STÄ°KLER
        // =============================================
        function loadHomeStats() {
            const bildirimler = tumBildirimleriGetir();
            const toplam = bildirimler.length;
            const halkaAcik = bildirimler.filter(b => b.halkaAcik).length;
            const tamamlanan = bildirimler.filter(b => b.durum === 'tamamlandi').length;
            const acil = bildirimler.filter(b => b.aciliyet === 'acil').length;
            
            const container = document.getElementById('homeStats');
            container.innerHTML = `
                <div class="stat-card">
                    <h3>Toplam Bildirim</h3>
                    <div class="stat-value">${toplam}</div>
                    <p class="stat-desc">Sistemde kayÄ±tlÄ± tÃ¼m bildirimler</p>
                </div>
                <div class="stat-card">
                    <h3>Halka AÃ§Ä±k</h3>
                    <div class="stat-value">${halkaAcik}</div>
                    <p class="stat-desc">Listede gÃ¶rÃ¼nen bildirimler</p>
                </div>
                <div class="stat-card">
                    <h3>Tamamlanan</h3>
                    <div class="stat-value">${tamamlanan}</div>
                    <p class="stat-desc">Ã‡Ã¶zÃ¼me kavuÅŸan sorunlar</p>
                </div>
                <div class="stat-card">
                    <h3>Acil Bildirim</h3>
                    <div class="stat-value">${acil}</div>
                    <p class="stat-desc">Acil durum bildirimleri</p>
                </div>
            `;
        }
        
        function loadDetayliIstatistikler() {
            const bildirimler = tumBildirimleriGetir();
            
            // Temel istatistikler
            const toplam = bildirimler.length;
            const bekleyen = bildirimler.filter(b => b.durum === 'bekliyor').length;
            const incelenen = bildirimler.filter(b => b.durum === 'inceleniyor').length;
            const tamamlanan = bildirimler.filter(b => b.durum === 'tamamlandi').length;
            
            // Aciliyet daÄŸÄ±lÄ±mÄ±
            const acil = bildirimler.filter(b => b.aciliyet === 'acil').length;
            const orta = bildirimler.filter(b => b.aciliyet === 'orta').length;
            const dusuk = bildirimler.filter(b => b.aciliyet === 'dusuk').length;
            
            // Container
            const container = document.getElementById('detayliStats');
            container.innerHTML = `
                <div class="stat-card">
                    <h3>Bekleyen</h3>
                    <div class="stat-value">${bekleyen}</div>
                    <p class="stat-desc">HenÃ¼z incelenmeyen bildirimler</p>
                </div>
                <div class="stat-card">
                    <h3>Ä°ncelenen</h3>
                    <div class="stat-value">${incelenen}</div>
                    <p class="stat-desc">Ã‡Ã¶zÃ¼m sÃ¼recindeki bildirimler</p>
                </div>
                <div class="stat-card">
                    <h3>Tamamlanan</h3>
                    <div class="stat-value">${tamamlanan}</div>
                    <p class="stat-desc">Ã‡Ã¶zÃ¼len bildirimler</p>
                </div>
                <div class="stat-card">
                    <h3>Acil Durum</h3>
                    <div class="stat-value">${acil}</div>
                    <p class="stat-desc">Acil bildirimler</p>
                </div>
            `;
            
            // En hÄ±zlÄ±/Ã§ok/az sorunlu mahalleleri hesapla
            calculateMahalleIstatistikleri();
            
            // Åehir daÄŸÄ±lÄ±mÄ±
            loadSehirDagilim();
        }
        
        function calculateMahalleIstatistikleri() {
            const bildirimler = tumBildirimleriGetir();
            
            // Mahallelere gÃ¶re grupla
            const mahalleMap = {};
            
            bildirimler.forEach(b => {
                const key = `${b.sehir} - ${b.ilce} - ${b.mahalle}`;
                if (!mahalleMap[key]) {
                    mahalleMap[key] = {
                        sehir: b.sehir,
                        ilce: b.ilce,
                        mahalle: b.mahalle,
                        bildirimler: [],
                        tamamlananlar: []
                    };
                }
                mahalleMap[key].bildirimler.push(b);
                
                if (b.durum === 'tamamlandi' && b.tamamlanmaTarihi) {
                    mahalleMap[key].tamamlananlar.push({
                        bildirim: b,
                        cozumSuresi: calculateGunFarki(b.tarih, b.tamamlanmaTarihi)
                    });
                }
            });
            
            // En Ã§ok sorun olan mahalle
            let enCokSorunMahalle = null;
            let enCokSayi = 0;
            
            // En az sorun olan mahalle
            let enAzSorunMahalle = null;
            let enAzSayi = Infinity;
            
            // En hÄ±zlÄ± Ã§Ã¶zÃ¼m yapan mahalle
            let enHizliMahalle = null;
            let enHizliOrtalama = Infinity;
            
            Object.values(mahalleMap).forEach(mahalle => {
                const bildirimSayisi = mahalle.bildirimler.length;
                
                // En Ã§ok sorun
                if (bildirimSayisi > enCokSayi) {
                    enCokSayi = bildirimSayisi;
                    enCokSorunMahalle = mahalle;
                }
                
                // En az sorun (en az 1 bildirim olmalÄ±)
                if (bildirimSayisi > 0 && bildirimSayisi < enAzSayi) {
                    enAzSayi = bildirimSayisi;
                    enAzSorunMahalle = mahalle;
                }
                
                // En hÄ±zlÄ± Ã§Ã¶zÃ¼m
                if (mahalle.tamamlananlar.length > 0) {
                    const ortalamaSure = mahalle.tamamlananlar.reduce((sum, item) => sum + item.cozumSuresi, 0) / mahalle.tamamlananlar.length;
                    if (ortalamaSure < enHizliOrtalama) {
                        enHizliOrtalama = ortalamaSure;
                        enHizliMahalle = mahalle;
                    }
                }
            });
            
            // UI'Ä± gÃ¼ncelle
            document.getElementById('enCokSorunMahalle').textContent = 
                enCokSorunMahalle ? enCokSorunMahalle.mahalle : '-';
            document.getElementById('enCokSorunDetay').textContent = 
                enCokSorunMahalle ? `Toplam bildirim sayÄ±sÄ±: ${enCokSayi}` : 'Veri yok';
            
            document.getElementById('enAzSorunMahalle').textContent = 
                enAzSorunMahalle ? enAzSorunMahalle.mahalle : '-';
            document.getElementById('enAzSorunDetay').textContent = 
                enAzSorunMahalle ? `Toplam bildirim sayÄ±sÄ±: ${enAzSayi}` : 'Veri yok';
            
            document.getElementById('enHizliMahalle').textContent = 
                enHizliMahalle ? enHizliMahalle.mahalle : '-';
            document.getElementById('enHizliDetay').textContent = 
                enHizliMahalle ? `Ortalama Ã§Ã¶zÃ¼m sÃ¼resi: ${enHizliOrtalama.toFixed(1)} gÃ¼n` : 'Veri yok';
        }
        
        function loadSehirDagilim() {
            const bildirimler = tumBildirimleriGetir();
            const sehirMap = {};
            
            // Åehirlere gÃ¶re say
            bildirimler.forEach(b => {
                sehirMap[b.sehir] = (sehirMap[b.sehir] || 0) + 1;
            });
            
            // SÄ±rala (Ã§oÄŸundan aza)
            const sorted = Object.entries(sehirMap).sort((a, b) => b[1] - a[1]);
            
            // HTML oluÅŸtur
            let html = '<div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 15px;">';
            
            sorted.forEach(([sehir, sayi]) => {
                const yuzde = ((sayi / bildirimler.length) * 100).toFixed(1);
                html += `
                    <div style="background: #f8f9fa; padding: 15px; border-radius: 8px;">
                        <div style="font-weight: 600; margin-bottom: 5px;">${sehir}</div>
                        <div style="display: flex; align-items: center; gap: 10px;">
                            <div style="flex: 1; height: 8px; background: #e9ecef; border-radius: 4px; overflow: hidden;">
                                <div style="width: ${yuzde}%; height: 100%; background: var(--secondary);"></div>
                            </div>
                            <div style="font-weight: 600; color: var(--secondary);">${sayi}</div>
                        </div>
                        <div style="font-size: 12px; color: #666; margin-top: 5px;">${yuzde}%</div>
                    </div>
                `;
            });
            
            html += '</div>';
            document.getElementById('sehirDagilim').innerHTML = html;
        }
        
        function calculateGunFarki(baslangic, bitis) {
            const bas = new Date(baslangic);
            const bit = new Date(bitis);
            const fark = bit.getTime() - bas.getTime();
            return Math.ceil(fark / (1000 * 3600 * 24));
        }
        
        // =============================================
        // ADMIN PANELÄ°
        // =============================================
        function checkAdminStatus() {
            const loggedIn = localStorage.getItem('adminLoggedIn') === 'true';
            isAdminLoggedIn = loggedIn;
            
            if (loggedIn) {
                document.getElementById('adminLoginForm').style.display = 'none';
                document.getElementById('adminPanel').style.display = 'block';
                loadAdminBildirimler();
            } else {
                document.getElementById('adminLoginForm').style.display = 'block';
                document.getElementById('adminPanel').style.display = 'none';
            }
        }
        
        function adminLogin() {
            const password = document.getElementById('adminPassword').value;
            const key = document.getElementById('adminKey').value;
            
            if (password === ADMIN_PASSWORD && key === ADMIN_KEY) {
                localStorage.setItem('adminLoggedIn', 'true');
                checkAdminStatus();
                alert('âœ… Admin paneline giriÅŸ baÅŸarÄ±lÄ±!');
            } else {
                alert('âŒ HatalÄ± ÅŸifre veya anahtar kelime!');
            }
        }
        
        function adminLogout() {
            localStorage.removeItem('adminLoggedIn');
            checkAdminStatus();
            showPage('home');
            alert('ğŸšª Ã‡Ä±kÄ±ÅŸ yapÄ±ldÄ±.');
        }
        
        function loadAdminBildirimler() {
            const bildirimler = tumBildirimleriGetir();
            const container = document.getElementById('adminBildirimListesi');
            
            if (bildirimler.length === 0) {
                container.innerHTML = '<p>HenÃ¼z bildirim bulunmuyor.</p>';
                return;
            }
            
            let html = '<div class="bildirim-list">';
            
            bildirimler.sort((a, b) => b.id - a.id).forEach(b => {
                // Aciliyet badge
                const aciliyetBadge = {
                    acil: '<span class="aciliyet-badge aciliyet-acil">ğŸ”´ Acil</span>',
                    orta: '<span class="aciliyet-badge aciliyet-orta">ğŸŸ¡ Orta</span>',
                    dusuk: '<span class="aciliyet-badge aciliyet-dusuk">ğŸŸ¢ DÃ¼ÅŸÃ¼k</span>'
                }[b.aciliyet] || '';
                
                // Durum seÃ§imi
                const durumOptions = `
                    <select class="form-control" style="width: auto;" onchange="updateBildirimDurum(${b.id}, this.value)">
                        <option value="bekliyor" ${b.durum === 'bekliyor' ? 'selected' : ''}>Bekliyor</option>
                        <option value="inceleniyor" ${b.durum === 'inceleniyor' ? 'selected' : ''}>Ä°nceleniyor</option>
                        <option value="tamamlandi" ${b.durum === 'tamamlandi' ? 'selected' : ''}>TamamlandÄ±</option>
                    </select>
                `;
                
                // Halka aÃ§Ä±k durumu
                const halkaAcikBadge = b.halkaAcik 
                    ? '<span style="background: #d4edda; color: #155724; padding: 3px 8px; border-radius: 12px; font-size: 12px;">Halka AÃ§Ä±k</span>'
                    : '<span style="background: #f8d7da; color: #721c24; padding: 3px 8px; border-radius: 12px; font-size: 12px;">Gizli</span>';
                
                html += `
                    <div class="bildirim-card admin-bildirim-card">
                        <div class="bildirim-header">
                            <div>
                                <span class="bildirim-id">#${b.id}</span>
                                ${halkaAcikBadge}
                            </div>
                            <div>
                                ${durumOptions}
                            </div>
                        </div>
                        
                        <div class="bildirim-body">
                            <div class="bildirim-detay">
                                <div class="detay-item">
                                    <span class="detay-label">Åehir</span>
                                    <span class="detay-value">${b.sehir}</span>
                                </div>
                                <div class="detay-item">
                                    <span class="detay-label">Ä°lÃ§e</span>
                                    <span class="detay-value">${b.ilce}</span>
                                </div>
                                <div class="detay-item">
                                    <span class="detay-label">Mahalle</span>
                                    <span class="detay-value">${b.mahalle}</span>
                                </div>
                                <div class="detay-item">
                                    <span class="detay-label">Tarih</span>
                                    <span class="detay-value">${b.tarih}</span>
                                </div>
                            </div>
                            
                            ${b.cadde ? `
                            <div class="detay-item">
                                <span class="detay-label">Cadde/Sokak</span>
                                <span class="detay-value">${b.cadde}</span>
                            </div>
                            ` : ''}
                            
                            <div style="margin-top: 15px;">
                                ${aciliyetBadge}
                            </div>
                            
                            <div style="margin-top: 15px;">
                                <div class="detay-label">AÃ§Ä±klama</div>
                                <div style="background: #f8f9fa; padding: 10px; border-radius: 6px; margin-top: 5px; font-size: 14px;">
                                    ${b.aciklama}
                                </div>
                            </div>
                            
                            ${b.iletisim.ad || b.iletisim.telefon ? `
                            <div style="margin-top: 15px;">
                                <div class="detay-label">Ä°letiÅŸim</div>
                                <div style="font-size: 14px;">
                                    ${b.iletisim.ad ? `<strong>Ad:</strong> ${b.iletisim.ad}<br>` : ''}
                                    ${b.iletisim.telefon ? `<strong>Tel:</strong> ${b.iletisim.telefon}` : ''}
                                </div>
                            </div>
                            ` : ''}
                            
                            <div class="admin-buttons">
                                <button class="btn btn-danger" style="padding: 8px 15px; font-size: 14px;" onclick="deleteBildirim(${b.id})">
                                    <span>ğŸ—‘ï¸</span> Sil
                                </button>
                            </div>
                        </div>
                    </div>
                `;
            });
            
            html += '</div>';
            container.innerHTML = html;
        }
        
        function updateBildirimDurum(id, yeniDurum) {
            if (bildirimGuncelle(id, { durum: yeniDurum })) {
                loadAdminBildirimler();
                loadHomeStats();
                loadDetayliIstatistikler();
                
                if (document.getElementById('list').classList.contains('active')) {
                    loadBildirimler();
                }
            }
        }
        
        function deleteBildirim(id) {
            if (confirm(`#${id} numaralÄ± bildirimi silmek istediÄŸinize emin misiniz?`)) {
                if (bildirimSil(id)) {
                    loadAdminBildirimler();
                    loadHomeStats();
                    loadDetayliIstatistikler();
                    
                    if (document.getElementById('list').classList.contains('active')) {
                        loadBildirimler();
                    }
                    
                    alert(`âœ… #${id} numaralÄ± bildirim silindi.`);
                }
            }
        }
        
        function markAllAsCompleted() {
            if (confirm('TÃ¼m bildirimleri "TamamlandÄ±" olarak iÅŸaretlemek istediÄŸinize emin misiniz?')) {
                const bildirimler = tumBildirimleriGetir();
                const today = new Date().toISOString().split('T')[0];
                
                bildirimler.forEach(b => {
                    if (b.durum !== 'tamamlandi') {
                        b.durum = 'tamamlandi';
                        b.tamamlanmaTarihi = today;
                    }
                });
                
                localStorage.setItem(DB_NAME, JSON.stringify(bildirimler));
                loadAdminBildirimler();
                loadHomeStats();
                loadDetayliIstatistikler();
                
                if (document.getElementById('list').classList.contains('active')) {
                    loadBildirimler();
                }
                
                alert('âœ… TÃ¼m bildirimler tamamlandÄ± olarak iÅŸaretlendi.');
            }
        }
        
        function deleteAllBildirimler() {
            if (confirm('TÃœM bildirimleri silmek istediÄŸinize emin misiniz? Bu iÅŸlem geri alÄ±namaz!')) {
                localStorage.removeItem(DB_NAME);
                veritabaniBaslat(); // Ã–rnek verilerle yeniden baÅŸlat
                
                loadAdminBildirimler();
                loadHomeStats();
                loadDetayliIstatistikler();
                
                if (document.getElementById('list').classList.contains('active')) {
                    loadBildirimler();
                }
                
                alert('âœ… TÃ¼m bildirimler silindi. VeritabanÄ± Ã¶rnek verilerle yeniden baÅŸlatÄ±ldÄ±.');
            }
        }
        
        // =============================================
        // DÄ°ÄER YARDIMCI FONKSÄ°YONLAR
        // =============================================
        
        // TarayÄ±cÄ± geÃ§miÅŸi yÃ¶netimi
        window.addEventListener('popstate', function() {
            const urlParams = new URLSearchParams(window.location.search);
            const page = urlParams.get('page') || 'home';
            showPage(page);
        });
        
        // Sayfa kapanÄ±rken admin oturumunu kapat
        window.addEventListener('beforeunload', function() {
            localStorage.removeItem('adminLoggedIn');
        });
    </script>
</body>
</html>
